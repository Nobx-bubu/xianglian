<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>果蔬脆片系列 - 产品详情与原料购买 | 乡链平台</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <style>
      /* 继承首页的基础样式 */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family:
          "Microsoft YaHei", "PingFang SC", "Helvetica Neue", Arial, sans-serif;
      }

      :root {
        --primary: #2e7d32;
        --primary-dark: #1b5e20;
        --primary-light: #4caf50;
        --primary-lighter: #e8f5e9;
        --secondary: #ff9800;
        --secondary-dark: #f57c00;
        --secondary-light: #ffb74d;
        --accent: #2196f3;
        --accent-light: #bbdefb;
        --dark: #263238;
        --dark-light: #455a64;
        --light: #f8f9fa;
        --gray: #78909c;
        --gray-light: #eceff1;
        --white: #fff;
        --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.05);
        --shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
        --shadow-lg: 0 10px 30px rgba(0, 0, 0, 0.12);
        --transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        --radius: 8px;
        --radius-lg: 12px;
      }

      body {
        line-height: 1.7;
        color: var(--dark);
        background: linear-gradient(135deg, #f9f9f9 0%, #f0f7f0 100%);
        overflow-x: hidden;
        font-size: 16px;
      }

      .container {
        width: 100%;
        max-width: 1280px;
        margin: 0 auto;
        padding: 0 20px;
      }

      /* 顶部导航 - 与首页一致 */
      .top-nav {
        background: rgba(255, 255, 255, 0.98);
        backdrop-filter: blur(10px);
        border-bottom: 1px solid rgba(46, 125, 50, 0.1);
        padding: 16px 0;
        font-size: 15px;
        position: sticky;
        top: 0;
        z-index: 1000;
        transition: var(--transition);
        box-shadow: var(--shadow-sm);
      }

      .top-nav.scrolled {
        padding: 12px 0;
        box-shadow: var(--shadow);
      }

      .top-nav-content {
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .logo {
        display: flex;
        align-items: center;
        gap: 12px;
        text-decoration: none;
      }

      .logo img {
        height: 40px;
        transition: var(--transition);
      }

      .logo-text {
        font-size: 28px;
        font-weight: 700;
        color: var(--primary);
        background: linear-gradient(
          135deg,
          var(--primary),
          var(--primary-light)
        );
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        letter-spacing: -0.5px;
      }

      .nav-links {
        display: flex;
        list-style: none;
        gap: 30px;
      }

      .nav-links a {
        text-decoration: none;
        color: var(--dark);
        font-weight: 500;
        padding: 8px 0;
        transition: var(--transition);
        position: relative;
      }

      .nav-links a:hover {
        color: var(--primary);
      }

      .nav-links li.active a {
        color: var(--primary);
        font-weight: 600;
      }

      .nav-links li.active::after,
      .nav-links a::after {
        content: "";
        position: absolute;
        bottom: -5px;
        left: 0;
        width: 0;
        height: 2px;
        background: linear-gradient(to right, var(--primary), var(--secondary));
        transition: width 0.3s ease;
      }

      .nav-links li.active::after {
        width: 100%;
      }

      .nav-links a:hover::after {
        width: 100%;
      }

      /* 购物车图标 */
      .cart-icon-container {
        position: relative;
        margin-left: 20px;
      }

      .cart-icon {
        font-size: 22px;
        color: var(--dark);
        cursor: pointer;
        transition: var(--transition);
        padding: 8px;
        border-radius: 50%;
        background: var(--gray-light);
        width: 42px;
        height: 42px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .cart-icon:hover {
        background: var(--primary-lighter);
        color: var(--primary);
      }

      .cart-count {
        position: absolute;
        top: -5px;
        right: -5px;
        background: var(--secondary);
        color: white;
        border-radius: 50%;
        width: 22px;
        height: 22px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 12px;
        font-weight: 700;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
      }

      /* 面包屑导航 */
      .breadcrumb {
        padding: 20px 0;
        background: var(--primary-lighter);
        margin-top: 20px;
        border-radius: var(--radius);
      }

      .breadcrumb ul {
        display: flex;
        list-style: none;
        gap: 10px;
        align-items: center;
      }

      .breadcrumb a {
        text-decoration: none;
        color: var(--dark);
        transition: var(--transition);
      }

      .breadcrumb a:hover {
        color: var(--primary);
      }

      .breadcrumb i {
        font-size: 12px;
        color: var(--gray);
      }

      /* 产品详情主区域 */
      .product-detail-main {
        padding: 60px 0;
      }

      .product-header {
        display: flex;
        gap: 40px;
        margin-bottom: 60px;
        flex-wrap: wrap;
      }

      .product-gallery {
        flex: 1;
        min-width: 300px;
      }

      .main-image {
        width: 100%;
        border-radius: var(--radius-lg);
        overflow: hidden;
        box-shadow: var(--shadow);
        margin-bottom: 20px;
      }

      .main-image img {
        width: 100%;
        height: 350px;
        object-fit: cover;
        transition: transform 0.5s ease;
      }

      .main-image:hover img {
        transform: scale(1.05);
      }

      .thumbnail-container {
        display: flex;
        gap: 15px;
      }

      .thumbnail {
        width: 80px;
        height: 80px;
        border-radius: var(--radius);
        overflow: hidden;
        cursor: pointer;
        border: 2px solid transparent;
        transition: var(--transition);
      }

      .thumbnail.active {
        border-color: var(--primary);
      }

      .thumbnail img {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }

      .product-info {
        flex: 1;
        min-width: 300px;
      }

      .product-badge {
        display: inline-block;
        background: var(--secondary);
        color: white;
        padding: 5px 15px;
        border-radius: 20px;
        font-size: 14px;
        font-weight: 600;
        margin-bottom: 15px;
      }

      .product-title {
        font-size: 32px;
        color: var(--primary-dark);
        margin-bottom: 15px;
        font-weight: 700;
      }

      .product-description {
        color: var(--dark-light);
        line-height: 1.7;
        margin-bottom: 25px;
        font-size: 17px;
      }

      .product-specs {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 15px;
        margin-bottom: 30px;
      }

      .spec-item {
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .spec-icon {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background: var(--primary-lighter);
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--primary);
        font-size: 18px;
      }

      .spec-content h4 {
        font-size: 14px;
        color: var(--gray);
        margin-bottom: 3px;
      }

      .spec-content p {
        font-weight: 600;
        color: var(--dark);
      }

      .investment-box {
        background: linear-gradient(
          135deg,
          var(--primary-lighter),
          rgba(255, 248, 225, 0.3)
        );
        border-radius: var(--radius-lg);
        padding: 25px;
        margin-bottom: 30px;
        border-left: 5px solid var(--primary);
      }

      .investment-title {
        font-size: 18px;
        color: var(--primary-dark);
        margin-bottom: 10px;
        font-weight: 600;
      }

      .investment-price {
        font-size: 28px;
        color: var(--primary);
        font-weight: 700;
        margin-bottom: 5px;
      }

      .investment-note {
        font-size: 14px;
        color: var(--gray);
      }

      .action-buttons {
        display: flex;
        gap: 15px;
        flex-wrap: wrap;
      }

      /* 按钮样式 */
      .btn {
        padding: 14px 32px;
        border-radius: var(--radius);
        font-weight: 600;
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
        transition: var(--transition);
        cursor: pointer;
        border: none;
        font-size: 16px;
        position: relative;
        overflow: hidden;
        z-index: 1;
      }

      .btn::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.2),
          transparent
        );
        transition: left 0.5s ease;
        z-index: -1;
      }

      .btn:hover::before {
        left: 100%;
      }

      .btn-primary {
        background: linear-gradient(
          135deg,
          var(--primary),
          var(--primary-dark)
        );
        color: var(--white);
        box-shadow: 0 4px 15px rgba(46, 125, 50, 0.3);
      }

      .btn-primary:hover {
        transform: translateY(-3px);
        box-shadow: 0 8px 25px rgba(46, 125, 50, 0.4);
      }

      .btn-secondary {
        background: linear-gradient(
          135deg,
          var(--secondary),
          var(--secondary-dark)
        );
        color: var(--white);
        box-shadow: 0 4px 15px rgba(255, 152, 0, 0.3);
      }

      .btn-secondary:hover {
        transform: translateY(-3px);
        box-shadow: 0 8px 25px rgba(255, 152, 0, 0.4);
      }

      .btn-accent {
        background: linear-gradient(135deg, var(--accent), #1565c0);
        color: var(--white);
        box-shadow: 0 4px 15px rgba(33, 150, 243, 0.3);
      }

      .btn-accent:hover {
        transform: translateY(-3px);
        box-shadow: 0 8px 25px rgba(33, 150, 243, 0.4);
      }

      .btn-outline {
        background: transparent;
        color: var(--primary);
        border: 2px solid var(--primary);
      }

      .btn-outline:hover {
        background: var(--primary);
        color: var(--white);
        transform: translateY(-3px);
        box-shadow: 0 4px 15px rgba(46, 125, 50, 0.2);
      }

      .btn-sm {
        padding: 10px 20px;
        font-size: 14px;
      }

      /* 详细信息部分 */
      .detail-section {
        margin-bottom: 60px;
      }

      .section-title {
        font-size: 28px;
        color: var(--primary-dark);
        margin-bottom: 25px;
        font-weight: 700;
        position: relative;
        padding-bottom: 15px;
      }

      .section-title::after {
        content: "";
        position: absolute;
        bottom: 0;
        left: 0;
        width: 60px;
        height: 3px;
        background: linear-gradient(to right, var(--primary), var(--secondary));
        border-radius: 3px;
      }

      /* 原料购买部分 - 新增 */
      .purchase-section {
        background: linear-gradient(
          135deg,
          rgba(255, 248, 225, 0.3),
          var(--primary-lighter)
        );
        border-radius: var(--radius-lg);
        padding: 50px;
        margin-bottom: 60px;
        box-shadow: var(--shadow);
      }

      .purchase-header {
        text-align: center;
        margin-bottom: 40px;
      }

      .purchase-title {
        font-size: 32px;
        color: var(--primary-dark);
        margin-bottom: 15px;
        font-weight: 700;
      }

      .purchase-subtitle {
        font-size: 18px;
        color: var(--dark-light);
        max-width: 800px;
        margin: 0 auto;
      }

      .purchase-options {
        display: flex;
        gap: 20px;
        margin-bottom: 40px;
        flex-wrap: wrap;
      }

      .purchase-option {
        flex: 1;
        min-width: 250px;
        background: var(--white);
        border-radius: var(--radius-lg);
        padding: 30px;
        box-shadow: var(--shadow);
        text-align: center;
        transition: var(--transition);
      }

      .purchase-option:hover {
        transform: translateY(-5px);
        box-shadow: var(--shadow-lg);
      }

      .purchase-option-icon {
        width: 80px;
        height: 80px;
        border-radius: 50%;
        background: var(--primary-lighter);
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 25px;
        font-size: 32px;
        color: var(--primary);
      }

      .purchase-option h3 {
        color: var(--primary-dark);
        margin-bottom: 15px;
        font-size: 22px;
        font-weight: 600;
      }

      .purchase-option p {
        color: var(--dark-light);
        line-height: 1.6;
        margin-bottom: 25px;
      }

      .purchase-option-features {
        list-style: none;
        text-align: left;
        margin-top: 20px;
      }

      .purchase-option-features li {
        margin-bottom: 12px;
        color: var(--dark);
        position: relative;
        padding-left: 25px;
      }

      .purchase-option-features li::before {
        content: "✓";
        position: absolute;
        left: 0;
        color: var(--primary);
        font-weight: bold;
      }

      /* 原料购买表格 */
      .ingredients-table-container {
        background: var(--white);
        border-radius: var(--radius-lg);
        padding: 30px;
        box-shadow: var(--shadow);
        margin-bottom: 40px;
        overflow-x: auto;
      }

      .ingredients-table {
        width: 100%;
        border-collapse: collapse;
      }

      .ingredients-table th {
        background: var(--primary);
        color: white;
        padding: 15px;
        text-align: left;
        font-weight: 600;
      }

      .ingredients-table td {
        padding: 15px;
        border-bottom: 1px solid var(--gray-light);
      }

      .ingredients-table tr:nth-child(even) {
        background: var(--primary-lighter);
      }

      .ingredients-table tr:hover {
        background: rgba(46, 125, 50, 0.1);
      }

      .quantity-control {
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .quantity-btn {
        width: 30px;
        height: 30px;
        border-radius: 50%;
        background: var(--gray-light);
        border: none;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: var(--transition);
      }

      .quantity-btn:hover {
        background: var(--primary-light);
        color: white;
      }

      .quantity-input {
        width: 60px;
        text-align: center;
        border: 1px solid var(--gray-light);
        border-radius: var(--radius);
        padding: 8px;
        font-size: 16px;
      }

      .add-to-cart-btn {
        background: var(--secondary);
        color: white;
        border: none;
        border-radius: var(--radius);
        padding: 10px 20px;
        cursor: pointer;
        transition: var(--transition);
        font-weight: 600;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .add-to-cart-btn:hover {
        background: var(--secondary-dark);
        transform: translateY(-2px);
      }

      /* 购物车侧边栏 */
      .cart-sidebar {
        position: fixed;
        top: 0;
        right: -400px;
        width: 380px;
        height: 100%;
        background: var(--white);
        box-shadow: var(--shadow-lg);
        z-index: 2000;
        transition: right 0.4s ease;
        padding: 30px;
        overflow-y: auto;
        display: flex;
        flex-direction: column;
      }

      .cart-sidebar.open {
        right: 0;
      }

      .cart-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 30px;
        padding-bottom: 20px;
        border-bottom: 2px solid var(--gray-light);
      }

      .cart-header h3 {
        font-size: 24px;
        color: var(--primary-dark);
        font-weight: 700;
      }

      .close-cart {
        background: none;
        border: none;
        font-size: 24px;
        color: var(--gray);
        cursor: pointer;
        transition: var(--transition);
      }

      .close-cart:hover {
        color: var(--primary);
      }

      .cart-items {
        flex-grow: 1;
        margin-bottom: 30px;
      }

      .cart-item {
        display: flex;
        align-items: center;
        gap: 15px;
        padding: 15px 0;
        border-bottom: 1px solid var(--gray-light);
      }

      .cart-item-img {
        width: 60px;
        height: 60px;
        border-radius: var(--radius);
        overflow: hidden;
      }

      .cart-item-img img {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }

      .cart-item-info {
        flex-grow: 1;
      }

      .cart-item-name {
        font-weight: 600;
        color: var(--dark);
        margin-bottom: 5px;
      }

      .cart-item-price {
        color: var(--primary);
        font-weight: 600;
      }

      .cart-item-quantity {
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .remove-item {
        background: none;
        border: none;
        color: var(--gray);
        cursor: pointer;
        font-size: 18px;
        transition: var(--transition);
      }

      .remove-item:hover {
        color: var(--secondary);
      }

      .cart-footer {
        border-top: 2px solid var(--gray-light);
        padding-top: 20px;
      }

      .cart-total {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
        font-size: 20px;
        font-weight: 700;
        color: var(--primary-dark);
      }

      .cart-actions {
        display: flex;
        flex-direction: column;
        gap: 15px;
      }

      /* 购买表单 */
      .purchase-form-container {
        background: var(--white);
        border-radius: var(--radius-lg);
        padding: 40px;
        box-shadow: var(--shadow);
        margin-top: 40px;
      }

      .form-title {
        font-size: 24px;
        color: var(--primary-dark);
        margin-bottom: 30px;
        font-weight: 700;
        text-align: center;
      }

      .form-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 25px;
        margin-bottom: 30px;
      }

      .form-group {
        margin-bottom: 20px;
      }

      .form-group label {
        display: block;
        margin-bottom: 8px;
        color: var(--dark);
        font-weight: 600;
      }

      .form-group input,
      .form-group select,
      .form-group textarea {
        width: 100%;
        padding: 12px 15px;
        border: 1px solid var(--gray-light);
        border-radius: var(--radius);
        font-size: 16px;
        transition: var(--transition);
      }

      .form-group input:focus,
      .form-group select:focus,
      .form-group textarea:focus {
        outline: none;
        border-color: var(--primary);
        box-shadow: 0 0 0 3px rgba(46, 125, 50, 0.1);
      }

      .form-row {
        display: flex;
        gap: 20px;
      }

      .form-row .form-group {
        flex: 1;
      }

      .form-actions {
        display: flex;
        justify-content: center;
        gap: 20px;
        margin-top: 40px;
      }

      /* 订单确认弹窗 */
      .order-modal {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        z-index: 3000;
        display: flex;
        align-items: center;
        justify-content: center;
        opacity: 0;
        visibility: hidden;
        transition: var(--transition);
      }

      .order-modal.open {
        opacity: 1;
        visibility: visible;
      }

      .order-modal-content {
        background: var(--white);
        border-radius: var(--radius-lg);
        padding: 40px;
        max-width: 600px;
        width: 90%;
        max-height: 90vh;
        overflow-y: auto;
        box-shadow: var(--shadow-lg);
        position: relative;
      }

      .order-modal-header {
        text-align: center;
        margin-bottom: 30px;
      }

      .order-modal-header h3 {
        font-size: 28px;
        color: var(--primary-dark);
        margin-bottom: 10px;
        font-weight: 700;
      }

      .order-success-icon {
        width: 80px;
        height: 80px;
        border-radius: 50%;
        background: var(--primary-lighter);
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 20px;
        font-size: 36px;
        color: var(--primary);
      }

      .order-details {
        background: var(--primary-lighter);
        border-radius: var(--radius);
        padding: 25px;
        margin-bottom: 30px;
      }

      .order-detail-item {
        display: flex;
        justify-content: space-between;
        margin-bottom: 10px;
        padding-bottom: 10px;
        border-bottom: 1px solid rgba(46, 125, 50, 0.2);
      }

      .order-detail-item:last-child {
        border-bottom: none;
        margin-bottom: 0;
        padding-bottom: 0;
      }

      .order-detail-label {
        color: var(--dark);
        font-weight: 600;
      }

      .order-detail-value {
        color: var(--primary-dark);
        font-weight: 600;
      }

      .close-modal {
        position: absolute;
        top: 20px;
        right: 20px;
        background: none;
        border: none;
        font-size: 24px;
        color: var(--gray);
        cursor: pointer;
      }

      /* 地图区域 - 从首页复制 */
      .map-section {
        margin: 60px 0;
        position: relative;
      }

      .map-container {
        background: var(--white);
        border-radius: var(--radius-lg);
        padding: 40px;
        box-shadow: var(--shadow-lg);
        position: relative;
        overflow: hidden;
      }

      .map-container::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 5px;
        background: linear-gradient(to right, var(--primary), var(--secondary));
      }

      .map-header {
        text-align: center;
        margin-bottom: 40px;
        padding: 0 60px;
        transition: padding 0.3s ease;
        position: relative;
        z-index: 1;
      }

      .map-title {
        font-size: 30px;
        color: var(--primary-dark);
        margin-bottom: 15px;
        font-weight: 700;
        line-height: 1.3;
      }

      .map-subtitle {
        font-size: 18px;
        color: var(--gray);
        max-width: 800px;
        margin: 0 auto;
      }

      .map-content {
        display: flex;
        position: relative;
        min-height: 650px;
        border-radius: var(--radius);
        overflow: hidden;
        background: var(--gray-light);
      }

      .map-sidebar {
        position: absolute;
        left: 0;
        top: 0;
        width: 70px;
        background: var(--white);
        border-right: 1px solid var(--gray-light);
        overflow: hidden;
        transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        z-index: 10;
        height: 100%;
        display: flex;
        flex-direction: column;
      }

      .map-sidebar.expanded {
        width: 240px;
      }

      .sidebar-toggle {
        padding: 20px;
        background: var(--primary);
        color: white;
        border: none;
        cursor: pointer;
        font-size: 18px;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: var(--transition);
        flex-shrink: 0;
      }

      .sidebar-toggle:hover {
        background: var(--primary-dark);
      }

      .sidebar-toggle i {
        transition: transform 0.4s ease;
      }

      .map-sidebar.expanded .sidebar-toggle i {
        transform: rotate(180deg);
      }

      .sidebar-content {
        padding: 20px;
        overflow-y: auto;
        flex-grow: 1;
      }

      .sidebar-title {
        font-size: 16px;
        font-weight: 600;
        color: var(--primary-dark);
        margin-bottom: 20px;
        padding-bottom: 15px;
        border-bottom: 2px solid var(--gray-light);
        display: none;
      }

      .map-sidebar.expanded .sidebar-title {
        display: block;
      }

      .sidebar-item {
        display: flex;
        align-items: center;
        padding: 14px 15px;
        margin-bottom: 10px;
        border-radius: var(--radius);
        cursor: pointer;
        transition: var(--transition);
        color: var(--dark);
        text-decoration: none;
      }

      .sidebar-item:hover {
        background: var(--primary-lighter);
        color: var(--primary);
      }

      .sidebar-item.active {
        background: linear-gradient(
          135deg,
          var(--primary),
          var(--primary-dark)
        );
        color: white;
        box-shadow: 0 4px 12px rgba(46, 125, 50, 0.2);
      }

      .sidebar-icon {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background: var(--gray-light);
        display: flex;
        align-items: center;
        justify-content: center;
        margin-right: 15px;
        flex-shrink: 0;
        font-size: 18px;
        transition: var(--transition);
      }

      .sidebar-item:hover .sidebar-icon {
        background: rgba(46, 125, 50, 0.1);
        transform: scale(1.05);
      }

      .sidebar-item.active .sidebar-icon {
        background: rgba(255, 255, 255, 0.2);
        color: white;
      }

      .sidebar-text {
        font-size: 15px;
        font-weight: 500;
        white-space: nowrap;
        overflow: hidden;
        display: none;
      }

      .map-sidebar.expanded .sidebar-text {
        display: block;
      }

      .map-display-area {
        flex: 1;
        margin-left: 70px;
        transition: margin-left 0.4s ease;
        position: relative;
      }

      .map-sidebar.expanded ~ .map-content .map-display-area {
        margin-left: 240px;
      }

      .jiangsu-map {
        width: 100%;
        height: 650px;
        position: relative;
        overflow: hidden;
      }

      .map-image {
        width: 100%;
        height: 100%;
        object-fit: contain;
        background: #f9f9f9;
        transition: opacity 0.6s ease;
        display: block;
      }

      .map-image.fade-out {
        opacity: 0;
      }

      .map-image.fade-in {
        opacity: 1;
      }

      .city-points-container {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 5;
        transition: opacity 0.4s ease;
      }

      .city-points-container.hide {
        opacity: 0;
        visibility: hidden;
      }

      .city-points-container.show {
        opacity: 1;
        visibility: visible;
      }

      .map-point {
        position: absolute;
        width: 18px;
        height: 18px;
        background: var(--secondary);
        border-radius: 50%;
        transform: translate(-50%, -50%);
        box-shadow: 0 0 0 6px rgba(255, 152, 0, 0.3);
        cursor: pointer;
        z-index: 10;
        transition: var(--transition);
      }

      .map-point:hover {
        transform: translate(-50%, -50%) scale(1.3);
        box-shadow: 0 0 0 8px rgba(255, 152, 0, 0.4);
        z-index: 100;
      }

      .map-point:hover::after {
        content: attr(title);
        position: absolute;
        top: -45px;
        left: 50%;
        transform: translateX(-50%);
        background: rgba(0, 0, 0, 0.85);
        color: white;
        padding: 8px 15px;
        border-radius: var(--radius);
        font-size: 14px;
        white-space: nowrap;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        z-index: 1000;
      }

      .map-legend {
        display: flex;
        justify-content: center;
        margin-top: 30px;
        gap: 30px;
        flex-wrap: wrap;
      }

      .legend-item {
        display: flex;
        align-items: center;
        font-size: 16px;
        color: var(--dark);
        font-weight: 500;
        padding: 8px 15px;
        background: rgba(255, 255, 255, 0.9);
        border-radius: var(--radius);
        box-shadow: var(--shadow-sm);
      }

      .legend-color {
        width: 16px;
        height: 16px;
        border-radius: 50%;
        margin-right: 10px;
      }

      .legend-color.orange {
        background: var(--secondary);
      }

      .legend-color.green {
        background: var(--primary);
      }

      /* 页脚 */
      .footer {
        background: var(--dark);
        color: var(--white);
        padding: 70px 0 30px;
        margin-top: 100px;
        position: relative;
      }

      .footer::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 5px;
        background: linear-gradient(to right, var(--primary), var(--secondary));
      }

      .footer-content {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 50px;
        margin-bottom: 50px;
      }

      .footer-about {
        max-width: 350px;
      }

      .footer-logo {
        font-size: 32px;
        font-weight: 700;
        color: var(--white);
        margin-bottom: 25px;
        display: flex;
        align-items: center;
        gap: 12px;
      }

      .footer-logo i {
        color: var(--primary-light);
      }

      .footer-about p {
        color: #bbb;
        line-height: 1.7;
        margin-bottom: 25px;
      }

      .social-links {
        display: flex;
        gap: 15px;
      }

      .social-link {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.1);
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--white);
        text-decoration: none;
        transition: var(--transition);
      }

      .social-link:hover {
        background: var(--primary);
        transform: translateY(-3px);
      }

      .footer-column h4 {
        color: var(--white);
        margin-bottom: 25px;
        font-size: 20px;
        font-weight: 600;
        position: relative;
        padding-bottom: 10px;
      }

      .footer-column h4::after {
        content: "";
        position: absolute;
        bottom: 0;
        left: 0;
        width: 40px;
        height: 2px;
        background: var(--primary);
      }

      .footer-column ul {
        list-style: none;
      }

      .footer-column li {
        margin-bottom: 15px;
      }

      .footer-column a {
        color: #bbb;
        text-decoration: none;
        transition: var(--transition);
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .footer-column a:hover {
        color: var(--primary-light);
        padding-left: 5px;
      }

      .copyright {
        text-align: center;
        padding-top: 30px;
        border-top: 1px solid rgba(255, 255, 255, 0.1);
        color: #888;
        font-size: 14px;
      }

      /* 响应式设计 */
      @media (max-width: 1200px) {
        .container {
          max-width: 100%;
          padding: 0 30px;
        }
      }

      @media (max-width: 992px) {
        .product-header {
          flex-direction: column;
        }

        .purchase-options {
          flex-direction: column;
        }

        .purchase-option {
          min-width: 100%;
        }

        .cart-sidebar {
          width: 100%;
          right: -100%;
        }

        .map-header {
          padding: 0 20px;
        }

        .map-content {
          flex-direction: column;
          min-height: auto;
        }

        .map-sidebar {
          position: relative;
          width: 100%;
          height: auto;
          margin-bottom: 20px;
          flex-direction: row;
        }

        .map-sidebar.expanded {
          width: 100%;
        }

        .map-display-area {
          margin-left: 0 !important;
        }

        .sidebar-content {
          display: flex;
          flex-wrap: wrap;
          justify-content: center;
          gap: 10px;
          padding: 15px;
        }

        .sidebar-item {
          flex-direction: column;
          text-align: center;
          padding: 10px;
          margin-bottom: 0;
          min-width: 80px;
        }

        .sidebar-icon {
          margin-right: 0;
          margin-bottom: 5px;
        }

        .sidebar-title {
          display: none !important;
        }

        .sidebar-text {
          display: block !important;
          font-size: 12px;
        }

        .jiangsu-map {
          height: 500px;
        }
      }

      @media (max-width: 768px) {
        .container {
          padding: 0 20px;
        }

        .product-title {
          font-size: 26px;
        }

        .product-specs {
          grid-template-columns: 1fr;
        }

        .action-buttons {
          flex-direction: column;
        }

        .btn {
          width: 100%;
        }

        .purchase-section {
          padding: 30px;
        }

        .purchase-title {
          font-size: 26px;
        }

        .purchase-form-container {
          padding: 25px;
        }

        .form-grid {
          grid-template-columns: 1fr;
        }

        .form-row {
          flex-direction: column;
          gap: 0;
        }

        .map-container {
          padding: 25px;
        }

        .map-title {
          font-size: 24px;
        }

        .jiangsu-map {
          height: 400px;
        }
      }

      @media (max-width: 480px) {
        .product-title {
          font-size: 22px;
        }

        .purchase-title {
          font-size: 22px;
        }

        .ingredients-table-container {
          padding: 15px;
        }

        .order-modal-content {
          padding: 25px;
        }
      }
    </style>
  </head>
  <body>
    <!-- 顶部导航 -->
    <div class="top-nav" id="topNav">
      <div class="container">
        <div class="top-nav-content">
          <a href="index.html" class="logo">
            <div class="logo-text">乡链</div>
          </a>
          <ul class="nav-links">
            <li><a href="index.html">首页</a></li>
            <li><a href="index.html#products">产品展示</a></li>
            <li class="active"><a href="#">产品详情</a></li>
            <li><a href="index.html#patent">技术专利</a></li>
            <li><a href="index.html#map">原料地图</a></li>
            <li><a href="index.html#contact">联系我们</a></li>
          </ul>
          <div class="cart-icon-container">
            <div class="cart-icon" id="cartIcon">
              <i class="fas fa-shopping-cart"></i>
              <div class="cart-count" id="cartCount">0</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- 购物车侧边栏 -->
    <div class="cart-sidebar" id="cartSidebar">
      <div class="cart-header">
        <h3>购物车</h3>
        <button class="close-cart" id="closeCart">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div class="cart-items" id="cartItems">
        <!-- 购物车项目将通过JavaScript动态生成 -->
      </div>
      <div class="cart-footer">
        <div class="cart-total">
          <span>总计:</span>
          <span id="cartTotalPrice">¥0.00</span>
        </div>
        <div class="cart-actions">
          <button class="btn btn-primary" id="checkoutBtn">
            <i class="fas fa-shopping-bag"></i> 去结算
          </button>
          <button class="btn btn-outline" id="clearCartBtn">
            <i class="fas fa-trash-alt"></i> 清空购物车
          </button>
        </div>
      </div>
    </div>

    <!-- 面包屑导航 -->
    <div class="container">
      <div class="breadcrumb">
        <ul>
          <li><a href="index.html">首页</a></li>
          <li><i class="fas fa-chevron-right"></i></li>
          <li><a href="index.html#products">产品案例展示</a></li>
          <li><i class="fas fa-chevron-right"></i></li>
          <li>果蔬脆片系列</li>
        </ul>
      </div>
    </div>

    <!-- 产品详情主区域 -->
    <div class="container">
      <div class="product-detail-main">
        <div class="product-header">
          <div class="product-gallery">
            <div class="main-image">
              <img
                id="mainProductImage"
                src="https://images.unsplash.com/photo-1586190848861-99aa4a171e90?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80"
                alt="果蔬脆片"
              />
            </div>
            <div class="thumbnail-container">
              <div
                class="thumbnail active"
                data-image="https://images.unsplash.com/photo-1586190848861-99aa4a171e90?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80"
              >
                <img
                  src="https://images.unsplash.com/photo-1586190848861-99aa4a171e90?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80"
                  alt="果蔬脆片"
                />
              </div>
              <div
                class="thumbnail"
                data-image="https://images.unsplash.com/photo-1574323347407-f5e1ad6d020b?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80"
              >
                <img
                  src="https://images.unsplash.com/photo-1574323347407-f5e1ad6d020b?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80"
                  alt="果蔬脆片生产线"
                />
              </div>
              <div
                class="thumbnail"
                data-image="https://images.unsplash.com/photo-1568702846914-96b305d2aaeb?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80"
              >
                <img
                  src="https://images.unsplash.com/photo-1568702846914-96b305d2aaeb?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80"
                  alt="果蔬脆片包装"
                />
              </div>
            </div>
          </div>

          <div class="product-info">
            <div class="product-badge">热销产品</div>
            <h1 class="product-title">果蔬脆片系列</h1>
            <p class="product-description">
              采用低温真空油炸技术，保留果蔬原有营养成分和天然色泽，产品酥脆可口，健康美味。多种口味可选，满足不同消费群体需求。
            </p>

            <div class="product-specs">
              <div class="spec-item">
                <div class="spec-icon">
                  <i class="fas fa-industry"></i>
                </div>
                <div class="spec-content">
                  <h4>生产规模</h4>
                  <p>中小型生产线</p>
                </div>
              </div>
              <div class="spec-item">
                <div class="spec-icon">
                  <i class="fas fa-clock"></i>
                </div>
                <div class="spec-content">
                  <h4>建厂周期</h4>
                  <p>3-4个月</p>
                </div>
              </div>
              <div class="spec-item">
                <div class="spec-icon">
                  <i class="fas fa-users"></i>
                </div>
                <div class="spec-content">
                  <h4>所需人员</h4>
                  <p>15-20人</p>
                </div>
              </div>
              <div class="spec-item">
                <div class="spec-icon">
                  <i class="fas fa-chart-line"></i>
                </div>
                <div class="spec-content">
                  <h4>年产能</h4>
                  <p>200-300吨</p>
                </div>
              </div>
            </div>

            <div class="investment-box">
              <div class="investment-title">生产线投资</div>
              <div class="investment-price">¥150万 - ¥200万</div>
              <div class="investment-note">
                包含设备采购、技术授权、初期原料采购等费用
              </div>
            </div>

            <div class="action-buttons">
              <a
                href=".\purchase-market.html"
                target="_blank"
                class="btn btn-primary"
              >
                <i class="fas fa-shopping-cart"></i> 购买原料
              </a>
              <a href="#contact" class="btn btn-outline">
                <i class="fas fa-phone-alt"></i> 咨询合作
              </a>
            </div>
          </div>
        </div>

        <!-- 农产品原料购买部分 - 新增 -->
        <section class="purchase-section" id="purchase">
          <div class="purchase-header">
            <h2 class="purchase-title">农产品原料购买</h2>
            <p class="purchase-subtitle">
              直接从农户和合作社采购优质农产品原料，确保原料新鲜、安全、可追溯。支持批量采购和小额试购。
            </p>
          </div>

          <div class="purchase-options">
            <div class="purchase-option">
              <div class="purchase-option-icon">
                <i class="fas fa-truck"></i>
              </div>
              <h3>批量采购</h3>
              <p>适合食品加工企业、大型餐饮连锁等需要大量原料的客户</p>
              <ul class="purchase-option-features">
                <li>起订量：100公斤以上</li>
                <li>价格优惠，量大从优</li>
                <li>免费提供样品</li>
                <li>专业物流配送</li>
                <li>定制包装服务</li>
              </ul>
              <a href="#purchaseForm" class="btn btn-primary btn-sm">
                <i class="fas fa-clipboard-list"></i> 申请批量采购
              </a>
            </div>

            <div class="purchase-option">
              <div class="purchase-option-icon">
                <i class="fas fa-box-open"></i>
              </div>
              <h3>样品试购</h3>
              <p>适合小型企业、初创公司或需要测试原料质量的客户</p>
              <ul class="purchase-option-features">
                <li>最低5公斤起订</li>
                <li>多种原料组合购买</li>
                <li>快速发货，3天内送达</li>
                <li>提供质检报告</li>
                <li>支持退换货服务</li>
              </ul>
              <a href=".\purchase-market.html" target="_blank">
                <button class="btn btn-secondary btn-sm" id="samplePurchaseBtn">
                  <i class="fas fa-shopping-cart"></i> 立即试购
                </button>
              </a>
            </div>
          </div>

          <div class="ingredients-table-container">
            <h3
              style="
                color: var(--primary-dark);
                margin-bottom: 25px;
                font-size: 22px;
              "
            >
              原料价格表
            </h3>
            <table class="ingredients-table">
              <thead>
                <tr>
                  <th>原料名称</th>
                  <th>规格</th>
                  <th>产地</th>
                  <th>单价(元/公斤)</th>
                  <th>库存</th>
                  <th>购买数量(公斤)</th>
                  <th>操作</th>
                </tr>
              </thead>
              <tbody id="ingredientsTableBody">
                <!-- 原料行将通过JavaScript动态生成 -->
              </tbody>
            </table>
          </div>

          <div class="purchase-form-container" id="purchaseForm">
            <h3 class="form-title">原料采购申请表</h3>
            <form id="purchaseFormElement">
              <div class="form-grid">
                <div class="form-group">
                  <label for="companyName">公司/个人名称</label>
                  <input
                    type="text"
                    id="companyName"
                    required
                    placeholder="请输入公司或个人名称"
                  />
                </div>
                <div class="form-group">
                  <label for="contactPerson">联系人</label>
                  <input
                    type="text"
                    id="contactPerson"
                    required
                    placeholder="请输入联系人姓名"
                  />
                </div>
                <div class="form-group">
                  <label for="phone">联系电话</label>
                  <input
                    type="tel"
                    id="phone"
                    required
                    placeholder="请输入联系电话"
                  />
                </div>
                <div class="form-group">
                  <label for="email">电子邮箱</label>
                  <input
                    type="email"
                    id="email"
                    required
                    placeholder="请输入电子邮箱"
                  />
                </div>
                <div class="form-group">
                  <label for="purchaseType">采购类型</label>
                  <select id="purchaseType" required>
                    <option value="">请选择采购类型</option>
                    <option value="bulk">批量采购</option>
                    <option value="sample">样品试购</option>
                    <option value="custom">定制采购</option>
                  </select>
                </div>
                <div class="form-group">
                  <label for="deliveryDate">期望交货日期</label>
                  <input type="date" id="deliveryDate" required />
                </div>
              </div>
              <div class="form-group">
                <label for="deliveryAddress">收货地址</label>
                <input
                  type="text"
                  id="deliveryAddress"
                  required
                  placeholder="请输入详细收货地址"
                />
              </div>
              <div class="form-group">
                <label for="specialRequirements">特殊要求</label>
                <textarea
                  id="specialRequirements"
                  rows="4"
                  placeholder="请输入特殊要求，如包装、质检标准等"
                ></textarea>
              </div>
              <div class="form-actions">
                <button type="submit" class="btn btn-primary">
                  <i class="fas fa-paper-plane"></i> 提交采购申请
                </button>
                <button type="button" class="btn btn-outline" id="resetFormBtn">
                  <i class="fas fa-redo"></i> 重置表单
                </button>
              </div>
            </form>
          </div>
        </section>

        <!-- 订单确认弹窗 -->
        <div class="order-modal" id="orderModal">
          <div class="order-modal-content">
            <button class="close-modal" id="closeOrderModal">
              <i class="fas fa-times"></i>
            </button>
            <div class="order-modal-header">
              <div class="order-success-icon">
                <i class="fas fa-check"></i>
              </div>
              <h3>采购申请提交成功！</h3>
              <p>
                我们已收到您的采购申请，客服人员将在24小时内与您联系确认订单详情。
              </p>
            </div>
            <div class="order-details" id="orderDetails">
              <!-- 订单详情将通过JavaScript动态生成 -->
            </div>
            <div style="text-align: center; margin-top: 30px">
              <p>如需紧急联系，请拨打：<strong>025-8312-3456</strong></p>
              <p>或发送邮件至：<strong>purchase@xianglian.com</strong></p>
            </div>
            <div style="text-align: center; margin-top: 30px">
              <button class="btn btn-primary" id="closeModalBtn">
                <i class="fas fa-check"></i> 确认
              </button>
            </div>
          </div>
        </div>

        <!-- 原料地图 -->
        <div class="map-section">
          <div class="map-container">
            <div class="map-header">
              <h2 class="map-title">原料分布地图</h2>
              <p class="map-subtitle">
                可视化展示江苏省农产品分布与资源状况，支持多图层切换与产地信息查询
              </p>
            </div>
            <div class="map-content">
              <!-- 地图切换侧边栏 -->
              <div class="map-sidebar" id="mapSidebar">
                <button class="sidebar-toggle" id="sidebarToggle">
                  <i class="fas fa-layer-group"></i>
                </button>
                <div class="sidebar-content">
                  <div class="sidebar-title">地图图层</div>

                  <!-- 侧边栏项目 -->
                  <a
                    href="#"
                    class="sidebar-item active"
                    data-map-type="base"
                    data-img-path="./images/江苏省地图.webp"
                  >
                    <div class="sidebar-icon">
                      <i class="fas fa-map"></i>
                    </div>
                    <div class="sidebar-text">基础地图</div>
                  </a>

                  <a
                    href="#"
                    class="sidebar-item"
                    data-map-type="precipitation"
                    data-img-path="./images/降水图.png"
                  >
                    <div class="sidebar-icon">
                      <i class="fas fa-cloud-rain"></i>
                    </div>
                    <div class="sidebar-text">降水图</div>
                  </a>

                  <a
                    href="#"
                    class="sidebar-item"
                    data-map-type="transportation"
                    data-img-path="./images/交通图.png"
                  >
                    <div class="sidebar-icon">
                      <i class="fas fa-road"></i>
                    </div>
                    <div class="sidebar-text">交通图</div>
                  </a>

                  <a
                    href="#"
                    class="sidebar-item"
                    data-map-type="soil"
                    data-img-path="./images/粘土分布图.png"
                  >
                    <div class="sidebar-icon">
                      <i class="fas fa-seedling"></i>
                    </div>
                    <div class="sidebar-text">土壤图</div>
                  </a>

                  <a
                    href="#"
                    class="sidebar-item"
                    data-map-type="water"
                    data-img-path="./images/水系图.png"
                  >
                    <div class="sidebar-icon">
                      <i class="fas fa-tint"></i>
                    </div>
                    <div class="sidebar-text">水系图</div>
                  </a>
                </div>
              </div>

              <!-- 地图显示区域 -->
              <div class="map-display-area">
                <div class="jiangsu-map">
                  <!-- 地图图片显示区域 -->
                  <img
                    id="mainMapImage"
                    class="map-image fade-in"
                    src="./images/江苏省地图.webp"
                    alt="江苏省基础地图"
                  />

                  <!-- 标注点容器 -->
                  <div
                    id="city-points-container"
                    class="city-points-container show"
                  >
                    <!-- 地图上的标注点 -->
                    <div
                      class="map-point"
                      title="徐州 - 优质苹果产区"
                      style="top: 24%; left: 33%"
                    ></div>
                    <div
                      class="map-point"
                      title="盐城 - 胡萝卜主产区"
                      style="top: 38%; left: 58%"
                    ></div>
                    <div
                      class="map-point"
                      title="南通 - 香蕉温室种植"
                      style="top: 65%; left: 67%"
                    ></div>
                    <div
                      class="map-point"
                      title="扬州 - 秋葵种植基地"
                      style="top: 55%; left: 52%"
                    ></div>
                    <div
                      class="map-point"
                      title="淮安 - 蘑菇种植区"
                      style="top: 43%; left: 46%"
                    ></div>
                  </div>
                </div>
                <div class="map-legend">
                  <div class="legend-item">
                    <div class="legend-color orange"></div>
                    <span>果蔬脆片原料主产区</span>
                  </div>
                  <div class="legend-item">
                    <div class="legend-color green"></div>
                    <span>食品加工企业聚集区</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- 联系咨询 -->
        <div
          class="detail-section"
          id="contact"
          style="text-align: center; padding: 60px 0"
        >
          <h2 class="section-title" style="text-align: center">立即咨询合作</h2>
          <p style="max-width: 700px; margin: 0 auto 40px; font-size: 18px">
            如果您对果蔬脆片生产线感兴趣，欢迎联系我们获取详细资料、实地考察或定制专属合作方案。
          </p>
          <div class="action-buttons" style="justify-content: center">
            <a href="tel:+862583123456" class="btn btn-primary">
              <i class="fas fa-phone-alt"></i> 电话咨询: 025-8312-3456
            </a>
            <a href="mailto:business@xianglian.com" class="btn btn-secondary">
              <i class="fas fa-envelope"></i> 邮件咨询
            </a>
          </div>
        </div>
      </div>
    </div>

    <!-- 页脚 -->
    <footer class="footer" id="footerContact">
      <div class="container">
        <div class="footer-content">
          <div class="footer-about">
            <div class="footer-logo"><i class="fas fa-link"></i> 乡链</div>
            <p>
              农业技术专利对接与农产品供应链平台，连接食品加工技术与农业资源，为企业提供建厂解决方案，为农户提供销售渠道，推动农业产业升级。
            </p>
            <div class="social-links">
              <a href="#" class="social-link"><i class="fab fa-weixin"></i></a>
              <a href="#" class="social-link"><i class="fab fa-weibo"></i></a>
              <a href="#" class="social-link"><i class="fab fa-qq"></i></a>
              <a href="#" class="social-link"
                ><i class="fas fa-envelope"></i
              ></a>
            </div>
          </div>
          <div class="footer-column">
            <h4>快速链接</h4>
            <ul>
              <li>
                <a href="index.html"
                  ><i class="fas fa-chevron-right"></i> 首页</a
                >
              </li>
              <li>
                <a href="index.html#products"
                  ><i class="fas fa-chevron-right"></i> 产品展示</a
                >
              </li>
              <li>
                <a href="#"><i class="fas fa-chevron-right"></i> 产品详情</a>
              </li>
              <li>
                <a href="index.html#patent"
                  ><i class="fas fa-chevron-right"></i> 技术专利</a
                >
              </li>
              <li>
                <a href="index.html#map"
                  ><i class="fas fa-chevron-right"></i> 原料地图</a
                >
              </li>
            </ul>
          </div>
          <div class="footer-column">
            <h4>服务项目</h4>
            <ul>
              <li>
                <a href="#purchase"
                  ><i class="fas fa-chevron-right"></i> 农产品原料购买</a
                >
              </li>
              <li>
                <a href="#"
                  ><i class="fas fa-chevron-right"></i> 技术专利授权</a
                >
              </li>
              <li>
                <a href="#"
                  ><i class="fas fa-chevron-right"></i> 工厂建设服务</a
                >
              </li>
              <li>
                <a href="#"
                  ><i class="fas fa-chevron-right"></i> 原料采购对接</a
                >
              </li>
            </ul>
          </div>
          <div class="footer-column">
            <h4>联系我们</h4>
            <ul>
              <li>
                <a href="#"
                  ><i class="fas fa-map-marker-alt"></i>
                  江苏省南京市鼓楼区汉口路22号</a
                >
              </li>
              <li>
                <a href="tel:+862583123456"
                  ><i class="fas fa-phone"></i> 025-8312-3456 (企业咨询)</a
                >
              </li>
              <li>
                <a href="tel:+862583123457"
                  ><i class="fas fa-phone"></i> 025-8312-3457 (农户登记)</a
                >
              </li>
              <li>
                <a href="mailto:business@xianglian.com"
                  ><i class="fas fa-envelope"></i> business@xianglian.com</a
                >
              </li>
              <li>
                <a href="mailto:purchase@xianglian.com"
                  ><i class="fas fa-envelope"></i> purchase@xianglian.com
                  (采购)</a
                >
              </li>
            </ul>
          </div>
        </div>
        <div class="copyright">
          <p>&copy; 2023 乡链平台. 保留所有权利.</p>
          <p>建议使用Chrome、Edge等现代浏览器获得最佳体验</p>
        </div>
      </div>
    </footer>

    <script>
      // DOM加载完成后执行
      document.addEventListener("DOMContentLoaded", function () {
        // ==================== 导航栏滚动效果 ====================
        const topNav = document.getElementById("topNav");
        window.addEventListener("scroll", function () {
          if (window.scrollY > 50) {
            topNav.classList.add("scrolled");
          } else {
            topNav.classList.remove("scrolled");
          }
        });

        // ==================== 产品图片切换 ====================
        const thumbnails = document.querySelectorAll(".thumbnail");
        const mainProductImage = document.getElementById("mainProductImage");

        thumbnails.forEach((thumbnail) => {
          thumbnail.addEventListener("click", function () {
            // 移除所有缩略图的active类
            thumbnails.forEach((t) => t.classList.remove("active"));

            // 为当前点击的缩略图添加active类
            this.classList.add("active");

            // 切换主图片
            const imageUrl = this.getAttribute("data-image");
            mainProductImage.src = imageUrl;
          });
        });

        // ==================== 购物车功能 ====================
        const cartIcon = document.getElementById("cartIcon");
        const cartSidebar = document.getElementById("cartSidebar");
        const closeCart = document.getElementById("closeCart");
        const cartItems = document.getElementById("cartItems");
        const cartCount = document.getElementById("cartCount");
        const cartTotalPrice = document.getElementById("cartTotalPrice");
        const clearCartBtn = document.getElementById("clearCartBtn");
        const checkoutBtn = document.getElementById("checkoutBtn");

        // 购物车数据
        let cart = JSON.parse(localStorage.getItem("cart")) || [];

        // 更新购物车显示
        function updateCartDisplay() {
          // 更新购物车数量
          const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
          cartCount.textContent = totalItems;

          // 更新购物车侧边栏内容
          cartItems.innerHTML = "";
          let totalPrice = 0;

          if (cart.length === 0) {
            cartItems.innerHTML = `
              <div style="text-align: center; padding: 40px 0;">
                <i class="fas fa-shopping-cart" style="font-size: 48px; color: var(--gray-light); margin-bottom: 20px;"></i>
                <p style="color: var(--gray);">购物车空空如也</p>
              </div>
            `;
          } else {
            cart.forEach((item, index) => {
              const itemTotal = item.price * item.quantity;
              totalPrice += itemTotal;

              const cartItemElement = document.createElement("div");
              cartItemElement.className = "cart-item";
              cartItemElement.innerHTML = `
                <div class="cart-item-img">
                  <img src="${item.image}" alt="${item.name}" />
                </div>
                <div class="cart-item-info">
                  <div class="cart-item-name">${item.name}</div>
                  <div class="cart-item-price">¥${item.price.toFixed(2)}/公斤</div>
                </div>
                <div class="cart-item-quantity">
                  <button class="quantity-btn decrease-item" data-index="${index}">
                    <i class="fas fa-minus"></i>
                  </button>
                  <span>${item.quantity}公斤</span>
                  <button class="quantity-btn increase-item" data-index="${index}">
                    <i class="fas fa-plus"></i>
                  </button>
                </div>
                <button class="remove-item" data-index="${index}">
                  <i class="fas fa-trash"></i>
                </button>
              `;

              cartItems.appendChild(cartItemElement);
            });
          }

          // 更新总价
          cartTotalPrice.textContent = `¥${totalPrice.toFixed(2)}`;

          // 保存到本地存储
          localStorage.setItem("cart", JSON.stringify(cart));
        }

        // 打开购物车
        cartIcon.addEventListener("click", function () {
          cartSidebar.classList.add("open");
          updateCartDisplay();
        });

        // 关闭购物车
        closeCart.addEventListener("click", function () {
          cartSidebar.classList.remove("open");
        });

        // 清空购物车
        clearCartBtn.addEventListener("click", function () {
          if (cart.length > 0 && confirm("确定要清空购物车吗？")) {
            cart = [];
            updateCartDisplay();
          }
        });

        // 结算按钮
        checkoutBtn.addEventListener("click", function () {
          if (cart.length === 0) {
            alert("购物车是空的，请先添加商品！");
            return;
          }

          // 滚动到采购表单
          document.getElementById("purchaseForm").scrollIntoView({
            behavior: "smooth",
          });

          // 关闭购物车
          cartSidebar.classList.remove("open");
        });

        // 购物车项目操作事件委托
        cartItems.addEventListener("click", function (e) {
          const target = e.target;

          // 减少数量
          if (target.closest(".decrease-item")) {
            const index = parseInt(
              target.closest(".decrease-item").getAttribute("data-index"),
            );
            if (cart[index].quantity > 1) {
              cart[index].quantity--;
              updateCartDisplay();
            }
          }

          // 增加数量
          if (target.closest(".increase-item")) {
            const index = parseInt(
              target.closest(".increase-item").getAttribute("data-index"),
            );
            cart[index].quantity++;
            updateCartDisplay();
          }

          // 移除项目
          if (target.closest(".remove-item")) {
            const index = parseInt(
              target.closest(".remove-item").getAttribute("data-index"),
            );
            cart.splice(index, 1);
            updateCartDisplay();
          }
        });

        // ==================== 原料数据 ====================
        const ingredients = [
          {
            id: 1,
            name: "苹果",
            specification: "一级果，直径≥80mm",
            origin: "徐州",
            price: 8.0,
            stock: 5000,
            image:
              "https://images.unsplash.com/photo-1568702846914-96b305d2aaeb?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80",
            description: "徐州地区优质苹果，甜度高，口感好，适合制作苹果脆片。",
          },
          {
            id: 2,
            name: "胡萝卜",
            specification: "新鲜胡萝卜，长度15-20cm",
            origin: "盐城",
            price: 4.5,
            stock: 8000,
            image:
              "https://images.unsplash.com/photo-1447175008436-054170c2e979?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80",
            description: "盐城地区种植，胡萝卜素含量高，色泽鲜艳。",
          },
          {
            id: 3,
            name: "香蕉",
            specification: "成熟度适中，无黑斑",
            origin: "南通",
            price: 6.8,
            stock: 3000,
            image:
              "https://images.unsplash.com/photo-1571771894821-ce9b6c11b08e?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80",
            description: "南通地区温室香蕉，成熟度适中，适合深加工。",
          },
          {
            id: 4,
            name: "秋葵",
            specification: "新鲜秋葵，长度8-12cm",
            origin: "扬州",
            price: 12.0,
            stock: 2000,
            image:
              "https://images.unsplash.com/photo-1573246123716-6b1782bfc499?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80",
            description: "扬州地区特产，营养丰富，制作脆片口感独特。",
          },
          {
            id: 5,
            name: "蘑菇",
            specification: "新鲜香菇，菌盖直径4-6cm",
            origin: "淮安",
            price: 10.5,
            stock: 3500,
            image:
              "https://images.unsplash.com/photo-1513104890138-7c749659a591?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80",
            description: "淮安地区种植，肉质厚实，风味浓郁。",
          },
        ];

        // 生成原料表格
        const ingredientsTableBody = document.getElementById(
          "ingredientsTableBody",
        );

        ingredients.forEach((ingredient, index) => {
          const row = document.createElement("tr");
          row.innerHTML = `
            <td>
              <div style="display: flex; align-items: center; gap: 10px;">
                <img src="${ingredient.image}" alt="${ingredient.name}" style="width: 40px; height: 40px; border-radius: var(--radius); object-fit: cover;">
                <span style="font-weight: 600;">${ingredient.name}</span>
              </div>
            </td>
            <td>${ingredient.specification}</td>
            <td>${ingredient.origin}</td>
            <td style="font-weight: 700; color: var(--primary);">¥${ingredient.price.toFixed(2)}</td>
            <td>${ingredient.stock.toLocaleString()}公斤</td>
            <td>
              <div class="quantity-control">
                <button class="quantity-btn decrease-quantity" data-id="${ingredient.id}">
                  <i class="fas fa-minus"></i>
                </button>
                <input type="number" class="quantity-input" id="quantity-${ingredient.id}" value="100" min="10" max="${ingredient.stock}" step="10">
                <button class="quantity-btn increase-quantity" data-id="${ingredient.id}">
                  <i class="fas fa-plus"></i>
                </button>
              </div>
            </td>
            <td>
              <button class="add-to-cart-btn" data-id="${ingredient.id}">
                <i class="fas fa-cart-plus"></i> 加入购物车
              </button>
            </td>
          `;
          ingredientsTableBody.appendChild(row);
        });

        // 数量控制
        ingredientsTableBody.addEventListener("click", function (e) {
          const target = e.target;
          const id = target.closest("button")?.getAttribute("data-id");

          if (!id) return;

          const quantityInput = document.getElementById(`quantity-${id}`);
          let quantity = parseInt(quantityInput.value);
          const ingredient = ingredients.find((item) => item.id == id);

          // 减少数量
          if (target.closest(".decrease-quantity")) {
            if (quantity > 10) {
              quantity -= 10;
              quantityInput.value = quantity;
            }
          }

          // 增加数量
          if (target.closest(".increase-quantity")) {
            if (quantity < ingredient.stock) {
              quantity += 10;
              quantityInput.value = quantity;
            }
          }

          // 加入购物车
          if (target.closest(".add-to-cart-btn")) {
            const quantity = parseInt(quantityInput.value);

            // 检查是否已在购物车中
            const existingItemIndex = cart.findIndex((item) => item.id == id);

            if (existingItemIndex > -1) {
              // 更新现有项目数量
              cart[existingItemIndex].quantity += quantity;
            } else {
              // 添加新项目
              cart.push({
                id: ingredient.id,
                name: ingredient.name,
                price: ingredient.price,
                quantity: quantity,
                image: ingredient.image,
                specification: ingredient.specification,
                origin: ingredient.origin,
              });
            }

            updateCartDisplay();

            // 显示添加成功提示
            showNotification(`${ingredient.name} 已添加到购物车！`);
          }
        });

        // 显示通知
        function showNotification(message) {
          // 创建通知元素
          const notification = document.createElement("div");
          notification.style.cssText = `
            position: fixed;
            top: 100px;
            right: 20px;
            background: var(--primary);
            color: white;
            padding: 15px 25px;
            border-radius: var(--radius);
            box-shadow: var(--shadow-lg);
            z-index: 10000;
            display: flex;
            align-items: center;
            gap: 10px;
            animation: slideIn 0.3s ease, fadeOut 0.3s ease 2.7s forwards;
          `;

          notification.innerHTML = `
            <i class="fas fa-check-circle"></i>
            <span>${message}</span>
          `;

          document.body.appendChild(notification);

          // 3秒后移除通知
          setTimeout(() => {
            if (notification.parentNode) {
              notification.parentNode.removeChild(notification);
            }
          }, 3000);
        }

        // 添加CSS动画
        const style = document.createElement("style");
        style.textContent = `
          @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
          }
          @keyframes fadeOut {
            from { opacity: 1; }
            to { opacity: 0; }
          }
        `;
        document.head.appendChild(style);

        // ==================== 采购表单功能 ====================
        const purchaseFormElement = document.getElementById(
          "purchaseFormElement",
        );
        const resetFormBtn = document.getElementById("resetFormBtn");
        const orderModal = document.getElementById("orderModal");
        const closeOrderModal = document.getElementById("closeOrderModal");
        const closeModalBtn = document.getElementById("closeModalBtn");
        const orderDetails = document.getElementById("orderDetails");
        const samplePurchaseBtn = document.getElementById("samplePurchaseBtn");

        // 设置默认交货日期（3天后）
        const deliveryDateInput = document.getElementById("deliveryDate");
        const defaultDate = new Date();
        defaultDate.setDate(defaultDate.getDate() + 3);
        deliveryDateInput.valueAsDate = defaultDate;
        deliveryDateInput.min = new Date().toISOString().split("T")[0];

        // 提交表单
        purchaseFormElement.addEventListener("submit", function (e) {
          e.preventDefault();

          // 收集表单数据
          const formData = {
            companyName: document.getElementById("companyName").value,
            contactPerson: document.getElementById("contactPerson").value,
            phone: document.getElementById("phone").value,
            email: document.getElementById("email").value,
            purchaseType: document.getElementById("purchaseType").value,
            deliveryDate: document.getElementById("deliveryDate").value,
            deliveryAddress: document.getElementById("deliveryAddress").value,
            specialRequirements: document.getElementById("specialRequirements")
              .value,
            cartItems: cart,
            totalItems: cart.reduce((sum, item) => sum + item.quantity, 0),
            totalPrice: cart.reduce(
              (sum, item) => sum + item.price * item.quantity,
              0,
            ),
          };

          // 生成订单详情
          let orderDetailsHTML = "";

          // 订单概要
          orderDetailsHTML += `
            <div class="order-detail-item">
              <span class="order-detail-label">订单编号:</span>
              <span class="order-detail-value">XL${Date.now().toString().slice(-8)}</span>
            </div>
            <div class="order-detail-item">
              <span class="order-detail-label">采购类型:</span>
              <span class="order-detail-value">${
                formData.purchaseType === "bulk"
                  ? "批量采购"
                  : formData.purchaseType === "sample"
                    ? "样品试购"
                    : "定制采购"
              }</span>
            </div>
            <div class="order-detail-item">
              <span class="order-detail-label">总数量:</span>
              <span class="order-detail-value">${formData.totalItems}公斤</span>
            </div>
            <div class="order-detail-item">
              <span class="order-detail-label">总金额:</span>
              <span class="order-detail-value">¥${formData.totalPrice.toFixed(2)}</span>
            </div>
            <div class="order-detail-item">
              <span class="order-detail-label">交货日期:</span>
              <span class="order-detail-value">${new Date(formData.deliveryDate).toLocaleDateString("zh-CN")}</span>
            </div>
          `;

          // 购物车项目
          if (cart.length > 0) {
            orderDetailsHTML += `<div style="margin-top: 15px; font-weight: 600; color: var(--primary-dark);">采购项目:</div>`;

            cart.forEach((item) => {
              orderDetailsHTML += `
                <div class="order-detail-item">
                  <span class="order-detail-label">${item.name}</span>
                  <span class="order-detail-value">${item.quantity}公斤 × ¥${item.price.toFixed(2)} = ¥${(item.price * item.quantity).toFixed(2)}</span>
                </div>
              `;
            });
          }

          orderDetails.innerHTML = orderDetailsHTML;

          // 显示订单确认弹窗
          orderModal.classList.add("open");

          // 清空购物车
          cart = [];
          updateCartDisplay();

          // 重置表单
          purchaseFormElement.reset();
          deliveryDateInput.valueAsDate = defaultDate;
        });

        // 重置表单
        resetFormBtn.addEventListener("click", function () {
          if (confirm("确定要重置表单吗？所有已填写的内容将丢失。")) {
            purchaseFormElement.reset();
            deliveryDateInput.valueAsDate = defaultDate;
          }
        });

        // 样品试购按钮
        samplePurchaseBtn.addEventListener("click", function () {
          // 设置采购类型为样品试购
          document.getElementById("purchaseType").value = "sample";

          // 滚动到表单
          document.getElementById("purchaseForm").scrollIntoView({
            behavior: "smooth",
          });
        });

        // 关闭订单弹窗
        closeOrderModal.addEventListener("click", function () {
          orderModal.classList.remove("open");
        });

        closeModalBtn.addEventListener("click", function () {
          orderModal.classList.remove("open");
        });

        // 点击弹窗外部关闭
        orderModal.addEventListener("click", function (e) {
          if (e.target === orderModal) {
            orderModal.classList.remove("open");
          }
        });

        // ==================== 平滑滚动到锚点 ====================
        document.querySelectorAll('a[href^="#"]').forEach((anchor) => {
          anchor.addEventListener("click", function (e) {
            const href = this.getAttribute("href");

            // 排除空链接和javascript链接
            if (href === "#" || href.startsWith("javascript")) return;

            e.preventDefault();
            const targetId = href;
            const targetElement = document.querySelector(targetId);

            if (targetElement) {
              // 计算偏移量（考虑固定导航栏高度）
              const navHeight = topNav.offsetHeight;
              const targetPosition =
                targetElement.getBoundingClientRect().top +
                window.pageYOffset -
                navHeight -
                20;

              window.scrollTo({
                top: targetPosition,
                behavior: "smooth",
              });
            }
          });
        });

        // ==================== 地图侧边栏和切换功能 ====================
        const sidebar = document.getElementById("mapSidebar");
        const sidebarToggle = document.getElementById("sidebarToggle");
        const sidebarItems = document.querySelectorAll(".sidebar-item");
        const mainMapImage = document.getElementById("mainMapImage");
        const cityPointsContainer = document.getElementById(
          "city-points-container",
        );

        // 侧边栏展开/收起功能
        sidebarToggle.addEventListener("click", function () {
          sidebar.classList.toggle("expanded");
        });

        // 地图图片切换功能
        function switchMapImage(imgPath, mapName, mapType) {
          // 添加淡出效果
          mainMapImage.classList.remove("fade-in");
          mainMapImage.classList.add("fade-out");

          // 短暂延迟后切换图片并淡入
          setTimeout(() => {
            mainMapImage.src = imgPath;
            mainMapImage.alt = `江苏省${mapName}`;

            // 根据地图类型显示/隐藏标注点
            if (mapType === "base") {
              cityPointsContainer.classList.remove("hide");
              cityPointsContainer.classList.add("show");
            } else {
              cityPointsContainer.classList.remove("show");
              cityPointsContainer.classList.add("hide");
            }

            // 移除淡出效果，添加淡入效果
            mainMapImage.classList.remove("fade-out");
            mainMapImage.classList.add("fade-in");
          }, 300);
        }

        // 侧边栏项点击功能
        sidebarItems.forEach((item) => {
          item.addEventListener("click", function (e) {
            e.preventDefault();

            // 获取地图信息
            const mapType = this.getAttribute("data-map-type");
            const imgPath = this.getAttribute("data-img-path");
            const mapName = this.querySelector(".sidebar-text").textContent;

            // 移除所有项的active类
            sidebarItems.forEach((i) => i.classList.remove("active"));

            // 为当前点击项添加active类
            this.classList.add("active");

            // 切换地图图片
            switchMapImage(imgPath, mapName, mapType);
          });
        });

        // 自动展开侧边栏（桌面端）
        if (window.innerWidth > 992) {
          setTimeout(() => {
            sidebar.classList.add("expanded");
          }, 800);
        }

        // ==================== 地图标注点悬停效果 ====================
        document.querySelectorAll(".map-point").forEach((point) => {
          point.addEventListener("mouseenter", function () {
            this.style.transform = "translate(-50%, -50%) scale(1.3)";
            this.style.zIndex = "100";
          });

          point.addEventListener("mouseleave", function () {
            this.style.transform = "translate(-50%, -50%) scale(1)";
            this.style.zIndex = "10";
          });
        });

        // ==================== 响应式调整 ====================
        function handleResize() {
          const navLinks = document.querySelector(".nav-links");

          if (window.innerWidth <= 768) {
            // 移动端可能需要调整一些样式
          }
        }

        window.addEventListener("resize", handleResize);

        // 初始化购物车显示
        updateCartDisplay();
      });
    </script>
  </body>
</html>
