<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>农产品采购市场 | 乡链平台</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <style>
      /* 继承首页的基础样式 */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family:
          "Microsoft YaHei", "PingFang SC", "Helvetica Neue", Arial, sans-serif;
      }

      :root {
        --primary: #2e7d32;
        --primary-dark: #1b5e20;
        --primary-light: #4caf50;
        --primary-lighter: #e8f5e9;
        --secondary: #ff9800;
        --secondary-dark: #f57c00;
        --secondary-light: #ffb74d;
        --accent: #2196f3;
        --accent-light: #bbdefb;
        --dark: #263238;
        --dark-light: #455a64;
        --light: #f8f9fa;
        --gray: #78909c;
        --gray-light: #eceff1;
        --white: #fff;
        --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.05);
        --shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
        --shadow-lg: 0 10px 30px rgba(0, 0, 0, 0.12);
        --transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        --radius: 8px;
        --radius-lg: 12px;
      }

      body {
        line-height: 1.7;
        color: var(--dark);
        background: linear-gradient(135deg, #f9f9f9 0%, #f0f7f0 100%);
        overflow-x: hidden;
        font-size: 16px;
      }

      .container {
        width: 100%;
        max-width: 1400px;
        margin: 0 auto;
        padding: 0 20px;
      }

      /* 顶部导航 - 与首页一致 */
      .top-nav {
        background: rgba(255, 255, 255, 0.98);
        backdrop-filter: blur(10px);
        border-bottom: 1px solid rgba(46, 125, 50, 0.1);
        padding: 16px 0;
        font-size: 15px;
        position: sticky;
        top: 0;
        z-index: 1000;
        transition: var(--transition);
        box-shadow: var(--shadow-sm);
      }

      .top-nav.scrolled {
        padding: 12px 0;
        box-shadow: var(--shadow);
      }

      .top-nav-content {
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .logo {
        display: flex;
        align-items: center;
        gap: 12px;
        text-decoration: none;
      }

      .logo img {
        height: 40px;
        transition: var(--transition);
      }

      .logo-text {
        font-size: 28px;
        font-weight: 700;
        color: var(--primary);
        background: linear-gradient(
          135deg,
          var(--primary),
          var(--primary-light)
        );
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        letter-spacing: -0.5px;
      }

      .nav-links {
        display: flex;
        list-style: none;
        gap: 30px;
      }

      .nav-links a {
        text-decoration: none;
        color: var(--dark);
        font-weight: 500;
        padding: 8px 0;
        transition: var(--transition);
        position: relative;
      }

      .nav-links a:hover {
        color: var(--primary);
      }

      .nav-links li.active a {
        color: var(--primary);
        font-weight: 600;
      }

      .nav-links li.active::after,
      .nav-links a::after {
        content: "";
        position: absolute;
        bottom: -5px;
        left: 0;
        width: 0;
        height: 2px;
        background: linear-gradient(to right, var(--primary), var(--secondary));
        transition: width 0.3s ease;
      }

      .nav-links li.active::after {
        width: 100%;
      }

      .nav-links a:hover::after {
        width: 100%;
      }

      /* 购物车图标 */
      .cart-icon-container {
        position: relative;
        margin-left: 20px;
      }

      .cart-icon {
        font-size: 22px;
        color: var(--dark);
        cursor: pointer;
        transition: var(--transition);
        padding: 8px;
        border-radius: 50%;
        background: var(--gray-light);
        width: 42px;
        height: 42px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .cart-icon:hover {
        background: var(--primary-lighter);
        color: var(--primary);
      }

      .cart-count {
        position: absolute;
        top: -5px;
        right: -5px;
        background: var(--secondary);
        color: white;
        border-radius: 50%;
        width: 22px;
        height: 22px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 12px;
        font-weight: 700;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
      }

      /* 面包屑导航 */
      .breadcrumb {
        padding: 20px 0;
        background: var(--primary-lighter);
        margin-top: 20px;
        border-radius: var(--radius);
      }

      .breadcrumb ul {
        display: flex;
        list-style: none;
        gap: 10px;
        align-items: center;
      }

      .breadcrumb a {
        text-decoration: none;
        color: var(--dark);
        transition: var(--transition);
      }

      .breadcrumb a:hover {
        color: var(--primary);
      }

      .breadcrumb i {
        font-size: 12px;
        color: var(--gray);
      }

      /* 页面标题 */
      .page-title {
        padding: 50px 0 30px;
        text-align: center;
      }

      .page-title h1 {
        font-size: 36px;
        color: var(--primary-dark);
        margin-bottom: 15px;
        font-weight: 700;
        line-height: 1.2;
      }

      .page-title p {
        font-size: 18px;
        color: var(--dark-light);
        max-width: 800px;
        margin: 0 auto;
      }

      /* 按钮样式 */
      .btn {
        padding: 14px 32px;
        border-radius: var(--radius);
        font-weight: 600;
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
        transition: var(--transition);
        cursor: pointer;
        border: none;
        font-size: 16px;
        position: relative;
        overflow: hidden;
        z-index: 1;
      }

      .btn::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.2),
          transparent
        );
        transition: left 0.5s ease;
        z-index: -1;
      }

      .btn:hover::before {
        left: 100%;
      }

      .btn-primary {
        background: linear-gradient(
          135deg,
          var(--primary),
          var(--primary-dark)
        );
        color: var(--white);
        box-shadow: 0 4px 15px rgba(46, 125, 50, 0.3);
      }

      .btn-primary:hover {
        transform: translateY(-3px);
        box-shadow: 0 8px 25px rgba(46, 125, 50, 0.4);
      }

      .btn-secondary {
        background: linear-gradient(
          135deg,
          var(--secondary),
          var(--secondary-dark)
        );
        color: var(--white);
        box-shadow: 0 4px 15px rgba(255, 152, 0, 0.3);
      }

      .btn-secondary:hover {
        transform: translateY(-3px);
        box-shadow: 0 8px 25px rgba(255, 152, 0, 0.4);
      }

      .btn-outline {
        background: transparent;
        color: var(--primary);
        border: 2px solid var(--primary);
      }

      .btn-outline:hover {
        background: var(--primary);
        color: var(--white);
        transform: translateY(-3px);
        box-shadow: 0 4px 15px rgba(46, 125, 50, 0.2);
      }

      .btn-sm {
        padding: 10px 20px;
        font-size: 14px;
      }

      /* 农产品采购市场 */
      .market-section {
        padding: 30px 0 80px;
      }

      /* 筛选工具栏 */
      .market-toolbar {
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
        margin-bottom: 40px;
        padding: 25px;
        background: var(--white);
        border-radius: var(--radius-lg);
        box-shadow: var(--shadow);
        align-items: center;
      }

      .search-box {
        flex: 1;
        min-width: 300px;
        position: relative;
      }

      .search-input {
        width: 100%;
        padding: 14px 20px 14px 50px;
        border: 2px solid var(--gray-light);
        border-radius: var(--radius);
        font-size: 16px;
        transition: var(--transition);
        background: var(--light);
      }

      .search-input:focus {
        outline: none;
        border-color: var(--primary);
        box-shadow: 0 0 0 3px rgba(46, 125, 50, 0.1);
      }

      .search-icon {
        position: absolute;
        left: 20px;
        top: 50%;
        transform: translateY(-50%);
        color: var(--gray);
        font-size: 18px;
      }

      .filter-group {
        display: flex;
        gap: 15px;
        flex-wrap: wrap;
      }

      .filter-select {
        padding: 12px 20px;
        border: 2px solid var(--gray-light);
        border-radius: var(--radius);
        font-size: 16px;
        background: var(--white);
        color: var(--dark);
        min-width: 180px;
        cursor: pointer;
        transition: var(--transition);
      }

      .filter-select:focus {
        outline: none;
        border-color: var(--primary);
      }

      .filter-buttons {
        display: flex;
        gap: 10px;
      }

      /* 统计数据 */
      .market-stats {
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
        margin-bottom: 40px;
      }

      .stat-card {
        flex: 1;
        min-width: 200px;
        background: var(--white);
        border-radius: var(--radius-lg);
        padding: 25px;
        box-shadow: var(--shadow);
        text-align: center;
        transition: var(--transition);
      }

      .stat-card:hover {
        transform: translateY(-5px);
        box-shadow: var(--shadow-lg);
      }

      .stat-icon {
        width: 60px;
        height: 60px;
        border-radius: 50%;
        background: var(--primary-lighter);
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 15px;
        font-size: 24px;
        color: var(--primary);
      }

      .stat-number {
        font-size: 32px;
        color: var(--primary-dark);
        font-weight: 700;
        margin-bottom: 5px;
      }

      .stat-label {
        color: var(--dark-light);
        font-size: 16px;
      }

      /* 农产品卡片 */
      .products-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
        gap: 30px;
        margin-bottom: 50px;
      }

      .product-card {
        background: var(--white);
        border-radius: var(--radius-lg);
        overflow: hidden;
        box-shadow: var(--shadow);
        transition: var(--transition);
        position: relative;
      }

      .product-card:hover {
        transform: translateY(-10px);
        box-shadow: var(--shadow-lg);
      }

      .product-badge {
        position: absolute;
        top: 15px;
        right: 15px;
        background: var(--secondary);
        color: white;
        padding: 5px 12px;
        border-radius: 20px;
        font-size: 12px;
        font-weight: 600;
        z-index: 2;
      }

      .product-img {
        height: 200px;
        width: 100%;
        object-fit: cover;
        transition: transform 0.5s ease;
      }

      .product-card:hover .product-img {
        transform: scale(1.05);
      }

      .product-content {
        padding: 25px;
      }

      .product-header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        margin-bottom: 15px;
      }

      .product-title {
        font-size: 20px;
        color: var(--primary-dark);
        font-weight: 600;
        line-height: 1.3;
      }

      .product-price {
        font-size: 24px;
        color: var(--primary);
        font-weight: 700;
      }

      .product-price span {
        font-size: 14px;
        color: var(--gray);
        font-weight: normal;
      }

      .product-supplier {
        display: flex;
        align-items: center;
        gap: 10px;
        margin-bottom: 15px;
        padding-bottom: 15px;
        border-bottom: 1px solid var(--gray-light);
      }

      .supplier-avatar {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background: var(--primary-lighter);
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--primary);
        font-weight: 600;
      }

      .supplier-info h4 {
        font-size: 16px;
        color: var(--dark);
        margin-bottom: 3px;
      }

      .supplier-info p {
        font-size: 14px;
        color: var(--gray);
      }

      .product-details {
        margin-bottom: 20px;
      }

      .detail-item {
        display: flex;
        justify-content: space-between;
        margin-bottom: 8px;
        font-size: 14px;
      }

      .detail-label {
        color: var(--gray);
      }

      .detail-value {
        color: var(--dark);
        font-weight: 500;
      }

      .product-actions {
        display: flex;
        gap: 10px;
      }

      .btn-full {
        flex: 1;
      }

      /* 购物车侧边栏 */
      .cart-sidebar {
        position: fixed;
        top: 0;
        right: -400px;
        width: 380px;
        height: 100%;
        background: var(--white);
        box-shadow: var(--shadow-lg);
        z-index: 2000;
        transition: right 0.4s ease;
        padding: 30px;
        overflow-y: auto;
        display: flex;
        flex-direction: column;
      }

      .cart-sidebar.open {
        right: 0;
      }

      .cart-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 30px;
        padding-bottom: 20px;
        border-bottom: 2px solid var(--gray-light);
      }

      .cart-header h3 {
        font-size: 24px;
        color: var(--primary-dark);
        font-weight: 700;
      }

      .close-cart {
        background: none;
        border: none;
        font-size: 24px;
        color: var(--gray);
        cursor: pointer;
        transition: var(--transition);
      }

      .close-cart:hover {
        color: var(--primary);
      }

      .cart-items {
        flex-grow: 1;
        margin-bottom: 30px;
      }

      .cart-item {
        display: flex;
        align-items: center;
        gap: 15px;
        padding: 15px 0;
        border-bottom: 1px solid var(--gray-light);
      }

      .cart-item-img {
        width: 60px;
        height: 60px;
        border-radius: var(--radius);
        overflow: hidden;
      }

      .cart-item-img img {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }

      .cart-item-info {
        flex-grow: 1;
      }

      .cart-item-name {
        font-weight: 600;
        color: var(--dark);
        margin-bottom: 5px;
      }

      .cart-item-supplier {
        font-size: 12px;
        color: var(--gray);
        margin-bottom: 5px;
      }

      .cart-item-price {
        color: var(--primary);
        font-weight: 600;
      }

      .cart-item-quantity {
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .quantity-btn {
        width: 28px;
        height: 28px;
        border-radius: 50%;
        background: var(--gray-light);
        border: none;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: var(--transition);
      }

      .quantity-btn:hover {
        background: var(--primary-light);
        color: white;
      }

      .remove-item {
        background: none;
        border: none;
        color: var(--gray);
        cursor: pointer;
        font-size: 18px;
        transition: var(--transition);
      }

      .remove-item:hover {
        color: var(--secondary);
      }

      .cart-footer {
        border-top: 2px solid var(--gray-light);
        padding-top: 20px;
      }

      .cart-total {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
        font-size: 20px;
        font-weight: 700;
        color: var(--primary-dark);
      }

      .cart-actions {
        display: flex;
        flex-direction: column;
        gap: 15px;
      }

      /* 订单确认弹窗 */
      .order-modal {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        z-index: 3000;
        display: flex;
        align-items: center;
        justify-content: center;
        opacity: 0;
        visibility: hidden;
        transition: var(--transition);
      }

      .order-modal.open {
        opacity: 1;
        visibility: visible;
      }

      .order-modal-content {
        background: var(--white);
        border-radius: var(--radius-lg);
        padding: 40px;
        max-width: 600px;
        width: 90%;
        max-height: 90vh;
        overflow-y: auto;
        box-shadow: var(--shadow-lg);
        position: relative;
      }

      .order-modal-header {
        text-align: center;
        margin-bottom: 30px;
      }

      .order-modal-header h3 {
        font-size: 28px;
        color: var(--primary-dark);
        margin-bottom: 10px;
        font-weight: 700;
      }

      .order-success-icon {
        width: 80px;
        height: 80px;
        border-radius: 50%;
        background: var(--primary-lighter);
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 20px;
        font-size: 36px;
        color: var(--primary);
      }

      .order-details {
        background: var(--primary-lighter);
        border-radius: var(--radius);
        padding: 25px;
        margin-bottom: 30px;
      }

      .order-detail-item {
        display: flex;
        justify-content: space-between;
        margin-bottom: 10px;
        padding-bottom: 10px;
        border-bottom: 1px solid rgba(46, 125, 50, 0.2);
      }

      .order-detail-item:last-child {
        border-bottom: none;
        margin-bottom: 0;
        padding-bottom: 0;
      }

      .order-detail-label {
        color: var(--dark);
        font-weight: 600;
      }

      .order-detail-value {
        color: var(--primary-dark);
        font-weight: 600;
      }

      .close-modal {
        position: absolute;
        top: 20px;
        right: 20px;
        background: none;
        border: none;
        font-size: 24px;
        color: var(--gray);
        cursor: pointer;
      }

      /* 农民登记提示 */
      .farmer-registration {
        background: linear-gradient(
          135deg,
          var(--secondary),
          var(--secondary-dark)
        );
        color: white;
        border-radius: var(--radius-lg);
        padding: 40px;
        margin: 60px 0;
        text-align: center;
        position: relative;
        overflow: hidden;
      }

      .farmer-registration::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="none"><path d="M0,0 L100,0 L100,80 Q50,100 0,80 Z" fill="%23f57c00" opacity="0.2"/></svg>');
        background-size: cover;
      }

      .farmer-registration h3 {
        font-size: 28px;
        margin-bottom: 15px;
        position: relative;
        z-index: 1;
      }

      .farmer-registration p {
        font-size: 18px;
        margin-bottom: 30px;
        max-width: 800px;
        margin-left: auto;
        margin-right: auto;
        opacity: 0.95;
        line-height: 1.6;
        position: relative;
        z-index: 1;
      }

      /* 页脚 */
      .footer {
        background: var(--dark);
        color: var(--white);
        padding: 70px 0 30px;
        margin-top: 100px;
        position: relative;
      }

      .footer::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 5px;
        background: linear-gradient(to right, var(--primary), var(--secondary));
      }

      .footer-content {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 50px;
        margin-bottom: 50px;
      }

      .footer-about {
        max-width: 350px;
      }

      .footer-logo {
        font-size: 32px;
        font-weight: 700;
        color: var(--white);
        margin-bottom: 25px;
        display: flex;
        align-items: center;
        gap: 12px;
      }

      .footer-logo i {
        color: var(--primary-light);
      }

      .footer-about p {
        color: #bbb;
        line-height: 1.7;
        margin-bottom: 25px;
      }

      .social-links {
        display: flex;
        gap: 15px;
      }

      .social-link {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.1);
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--white);
        text-decoration: none;
        transition: var(--transition);
      }

      .social-link:hover {
        background: var(--primary);
        transform: translateY(-3px);
      }

      .footer-column h4 {
        color: var(--white);
        margin-bottom: 25px;
        font-size: 20px;
        font-weight: 600;
        position: relative;
        padding-bottom: 10px;
      }

      .footer-column h4::after {
        content: "";
        position: absolute;
        bottom: 0;
        left: 0;
        width: 40px;
        height: 2px;
        background: var(--primary);
      }

      .footer-column ul {
        list-style: none;
      }

      .footer-column li {
        margin-bottom: 15px;
      }

      .footer-column a {
        color: #bbb;
        text-decoration: none;
        transition: var(--transition);
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .footer-column a:hover {
        color: var(--primary-light);
        padding-left: 5px;
      }

      .copyright {
        text-align: center;
        padding-top: 30px;
        border-top: 1px solid rgba(255, 255, 255, 0.1);
        color: #888;
        font-size: 14px;
      }

      /* 响应式设计 */
      @media (max-width: 1200px) {
        .container {
          max-width: 100%;
          padding: 0 30px;
        }
      }

      @media (max-width: 992px) {
        .products-grid {
          grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        }

        .market-toolbar {
          flex-direction: column;
          align-items: stretch;
        }

        .search-box {
          min-width: 100%;
        }

        .cart-sidebar {
          width: 100%;
          right: -100%;
        }

        .nav-links {
          display: none;
        }
      }

      @media (max-width: 768px) {
        .container {
          padding: 0 20px;
        }

        .page-title h1 {
          font-size: 28px;
        }

        .products-grid {
          grid-template-columns: 1fr;
        }

        .product-actions {
          flex-direction: column;
        }

        .market-stats {
          flex-direction: column;
        }

        .stat-card {
          min-width: 100%;
        }

        .filter-group {
          flex-direction: column;
        }

        .filter-select {
          min-width: 100%;
        }

        .order-modal-content {
          padding: 25px;
        }

        .farmer-registration {
          padding: 30px;
        }

        .farmer-registration h3 {
          font-size: 24px;
        }
      }

      @media (max-width: 480px) {
        .page-title h1 {
          font-size: 24px;
        }

        .product-title {
          font-size: 18px;
        }

        .product-price {
          font-size: 20px;
        }
      }
    </style>
  </head>
  <body>
    <!-- 顶部导航 -->
    <div class="top-nav" id="topNav">
      <div class="container">
        <div class="top-nav-content">
          <a href="index.html" class="logo">
            <div class="logo-text">乡链</div>
          </a>
          <ul class="nav-links">
            <li><a href="index.html">首页</a></li>
            <li><a href="index.html#products">产品案例</a></li>
            <li class="active"><a href="#">采购市场</a></li>
            <li><a href="index.html#patent">技术专利</a></li>
            <li><a href="index.html#map">原料地图</a></li>
            <li><a href="index.html#contact">联系我们</a></li>
          </ul>
          <div class="cart-icon-container">
            <div class="cart-icon" id="cartIcon">
              <i class="fas fa-shopping-cart"></i>
              <div class="cart-count" id="cartCount">0</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- 购物车侧边栏 -->
    <div class="cart-sidebar" id="cartSidebar">
      <div class="cart-header">
        <h3>采购清单</h3>
        <button class="close-cart" id="closeCart">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div class="cart-items" id="cartItems">
        <!-- 购物车项目将通过JavaScript动态生成 -->
      </div>
      <div class="cart-footer">
        <div class="cart-total">
          <span>总计:</span>
          <span id="cartTotalPrice">¥0.00</span>
        </div>
        <div class="cart-actions">
          <button class="btn btn-primary" id="checkoutBtn">
            <i class="fas fa-file-alt"></i> 提交采购意向
          </button>
          <button class="btn btn-outline" id="clearCartBtn">
            <i class="fas fa-trash-alt"></i> 清空清单
          </button>
        </div>
      </div>
    </div>

    <!-- 订单确认弹窗 -->
    <div class="order-modal" id="orderModal">
      <div class="order-modal-content">
        <button class="close-modal" id="closeOrderModal">
          <i class="fas fa-times"></i>
        </button>
        <div class="order-modal-header">
          <div class="order-success-icon">
            <i class="fas fa-check"></i>
          </div>
          <h3>采购意向提交成功！</h3>
          <p>
            我们已收到您的采购意向，客服人员将在24小时内与您联系确认采购详情。
          </p>
        </div>
        <div class="order-details" id="orderDetails">
          <!-- 订单详情将通过JavaScript动态生成 -->
        </div>
        <div style="text-align: center; margin-top: 30px">
          <p>如需紧急联系，请拨打：<strong>025-8312-3456</strong></p>
          <p>或发送邮件至：<strong>purchase@xianglian.com</strong></p>
        </div>
        <div style="text-align: center; margin-top: 30px">
          <button class="btn btn-primary" id="closeModalBtn">
            <i class="fas fa-check"></i> 确认
          </button>
        </div>
      </div>
    </div>

    <!-- 面包屑导航 -->
    <div class="container">
      <div class="breadcrumb">
        <ul>
          <li><a href="index.html">首页</a></li>
          <li><i class="fas fa-chevron-right"></i></li>
          <li><a href="product-detail.html">产品详情</a></li>
          <li><i class="fas fa-chevron-right"></i></li>
          <li>农产品采购市场</li>
        </ul>
      </div>
    </div>

    <!-- 页面标题 -->
    <div class="container">
      <div class="page-title">
        <h1>农产品采购市场</h1>
        <p>
          直接对接农户，采购新鲜优质的农产品原料。所有农户均已在乡链平台免费登记信息，确保货源真实可靠。
        </p>
      </div>
    </div>

    <!-- 农产品采购市场 -->
    <div class="container">
      <div class="market-section">
        <!-- 筛选工具栏 -->
        <div class="market-toolbar">
          <div class="search-box">
            <i class="fas fa-search search-icon"></i>
            <input
              type="text"
              class="search-input"
              id="searchInput"
              placeholder="搜索农产品、农户或产地..."
            />
          </div>
          <div class="filter-group">
            <select class="filter-select" id="categoryFilter">
              <option value="">全部农产品</option>
              <option value="apple">苹果</option>
              <option value="carrot">胡萝卜</option>
              <option value="banana">香蕉</option>
              <option value="okra">秋葵</option>
              <option value="mushroom">蘑菇</option>
              <option value="peanut">花生</option>
              <option value="rice">大米</option>
              <option value="wheat">小麦</option>
            </select>
            <select class="filter-select" id="regionFilter">
              <option value="">全部地区</option>
              <option value="xuzhou">徐州</option>
              <option value="yancheng">盐城</option>
              <option value="nantong">南通</option>
              <option value="yangzhou">扬州</option>
              <option value="huaian">淮安</option>
              <option value="suzhou">苏州</option>
              <option value="wuxi">无锡</option>
              <option value="nanjing">南京</option>
            </select>
            <select class="filter-select" id="sortFilter">
              <option value="price-asc">价格: 低到高</option>
              <option value="price-desc">价格: 高到低</option>
              <option value="stock-desc">库存: 多到少</option>
              <option value="date-desc">最新上架</option>
            </select>
          </div>
          <div class="filter-buttons">
            <button class="btn btn-outline btn-sm" id="resetFilters">
              <i class="fas fa-redo"></i> 重置筛选
            </button>
          </div>
        </div>

        <!-- 统计数据 -->
        <div class="market-stats">
          <div class="stat-card">
            <div class="stat-icon">
              <i class="fas fa-apple-alt"></i>
            </div>
            <div class="stat-number" id="totalProducts">0</div>
            <div class="stat-label">可采购农产品</div>
          </div>
          <div class="stat-card">
            <div class="stat-icon">
              <i class="fas fa-users"></i>
            </div>
            <div class="stat-number" id="totalSuppliers">0</div>
            <div class="stat-label">登记农户/合作社</div>
          </div>
          <div class="stat-card">
            <div class="stat-icon">
              <i class="fas fa-map-marker-alt"></i>
            </div>
            <div class="stat-number" id="totalRegions">0</div>
            <div class="stat-label">覆盖地区</div>
          </div>
          <div class="stat-card">
            <div class="stat-icon">
              <i class="fas fa-box-open"></i>
            </div>
            <div class="stat-number" id="totalStock">0</div>
            <div class="stat-label">总库存(吨)</div>
          </div>
        </div>

        <!-- 农产品列表 -->
        <div class="products-grid" id="productsGrid">
          <!-- 农产品卡片将通过JavaScript动态生成 -->
        </div>

        <!-- 农民登记提示 -->
        <div class="farmer-registration">
          <h3>您是农民或合作社吗？</h3>
          <p>
            免费在乡链平台登记您的农产品信息，直接对接采购企业，获得更好的销售渠道和价格。
            无需任何费用，简单注册即可发布产品信息。
          </p>
          <a href="farmer-registration.html" class="btn btn-primary">
            <i class="fas fa-user-plus"></i> 立即免费登记农产品
          </a>
        </div>
      </div>
    </div>

    <!-- 页脚 -->
    <footer class="footer" id="footerContact">
      <div class="container">
        <div class="footer-content">
          <div class="footer-about">
            <div class="footer-logo"><i class="fas fa-link"></i> 乡链</div>
            <p>
              农业技术专利对接与农产品供应链平台，连接食品加工技术与农业资源，为企业提供建厂解决方案，为农户提供销售渠道，推动农业产业升级。
            </p>
            <div class="social-links">
              <a href="#" class="social-link"><i class="fab fa-weixin"></i></a>
              <a href="#" class="social-link"><i class="fab fa-weibo"></i></a>
              <a href="#" class="social-link"><i class="fab fa-qq"></i></a>
              <a href="#" class="social-link"
                ><i class="fas fa-envelope"></i
              ></a>
            </div>
          </div>
          <div class="footer-column">
            <h4>快速链接</h4>
            <ul>
              <li>
                <a href="index.html"
                  ><i class="fas fa-chevron-right"></i> 首页</a
                >
              </li>
              <li>
                <a href="index.html#products"
                  ><i class="fas fa-chevron-right"></i> 产品案例</a
                >
              </li>
              <li>
                <a href="#"><i class="fas fa-chevron-right"></i> 采购市场</a>
              </li>
              <li>
                <a href="index.html#patent"
                  ><i class="fas fa-chevron-right"></i> 技术专利</a
                >
              </li>
              <li>
                <a href="index.html#map"
                  ><i class="fas fa-chevron-right"></i> 原料地图</a
                >
              </li>
            </ul>
          </div>
          <div class="footer-column">
            <h4>采购服务</h4>
            <ul>
              <li>
                <a href="#"><i class="fas fa-chevron-right"></i> 农产品采购</a>
              </li>
              <li>
                <a href="#"><i class="fas fa-chevron-right"></i> 批量采购</a>
              </li>
              <li>
                <a href="#"><i class="fas fa-chevron-right"></i> 样品试购</a>
              </li>
              <li>
                <a href="#"><i class="fas fa-chevron-right"></i> 供应商对接</a>
              </li>
              <li>
                <a href="#"><i class="fas fa-chevron-right"></i> 质量检测</a>
              </li>
            </ul>
          </div>
          <div class="footer-column">
            <h4>联系我们</h4>
            <ul>
              <li>
                <a href="#"
                  ><i class="fas fa-map-marker-alt"></i>
                  江苏省南京市鼓楼区汉口路22号</a
                >
              </li>
              <li>
                <a href="tel:+862583123456"
                  ><i class="fas fa-phone"></i> 025-8312-3456 (企业咨询)</a
                >
              </li>
              <li>
                <a href="tel:+862583123457"
                  ><i class="fas fa-phone"></i> 025-8312-3457 (农户登记)</a
                >
              </li>
              <li>
                <a href="tel:+862583123458"
                  ><i class="fas fa-phone"></i> 025-8312-3458 (采购咨询)</a
                >
              </li>
              <li>
                <a href="mailto:purchase@xianglian.com"
                  ><i class="fas fa-envelope"></i> purchase@xianglian.com</a
                >
              </li>
            </ul>
          </div>
        </div>
        <div class="copyright">
          <p>&copy; 2023 乡链平台. 保留所有权利.</p>
          <p>建议使用Chrome、Edge等现代浏览器获得最佳体验</p>
          <p style="margin-top: 15px; font-size: 13px; color: #666">
            平台承诺：所有农户信息均免费登记，不向农户收取任何费用
          </p>
        </div>
      </div>
    </footer>

    <script>
      // DOM加载完成后执行
      document.addEventListener("DOMContentLoaded", function () {
        // ==================== 导航栏滚动效果 ====================
        const topNav = document.getElementById("topNav");
        window.addEventListener("scroll", function () {
          if (window.scrollY > 50) {
            topNav.classList.add("scrolled");
          } else {
            topNav.classList.remove("scrolled");
          }
        });

        // ==================== 农产品数据 ====================
        // 模拟从服务器获取的农产品数据
        const agriculturalProducts = [
          {
            id: 1,
            name: "红富士苹果",
            category: "apple",
            price: 7.8,
            unit: "公斤",
            stock: 2500,
            unitText: "公斤",
            supplier: {
              name: "张大山合作社",
              type: "合作社",
              region: "徐州",
              contact: "13812345678",
              rating: 4.8,
              joinDate: "2022-05-15",
            },
            origin: "徐州丰县",
            quality: "一级果",
            description: "红富士苹果，甜度高，色泽鲜艳，直径≥80mm",
            image:
              "https://images.unsplash.com/photo-1568702846914-96b305d2aaeb?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
            certification: ["无公害认证", "绿色食品"],
            delivery: "支持物流配送，3-5天送达",
            badge: "推荐供应商",
          },
          {
            id: 2,
            name: "优质胡萝卜",
            category: "carrot",
            price: 4.2,
            unit: "公斤",
            stock: 5000,
            unitText: "公斤",
            supplier: {
              name: "李丰收家庭农场",
              type: "家庭农场",
              region: "盐城",
              contact: "13912345678",
              rating: 4.6,
              joinDate: "2022-08-22",
            },
            origin: "盐城东台",
            quality: "特级",
            description: "新鲜胡萝卜，胡萝卜素含量高，长度15-20cm",
            image:
              "https://images.unsplash.com/photo-1447175008436-054170c2e979?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
            certification: ["绿色食品"],
            delivery: "支持物流配送，2-4天送达",
          },
          {
            id: 3,
            name: "香蕉",
            category: "banana",
            price: 6.5,
            unit: "公斤",
            stock: 1800,
            unitText: "公斤",
            supplier: {
              name: "王果农",
              type: "个体农户",
              region: "南通",
              contact: "13712345678",
              rating: 4.5,
              joinDate: "2023-01-10",
            },
            origin: "南通如东",
            quality: "一级",
            description: "成熟度适中，无黑斑，适合深加工",
            image:
              "https://images.unsplash.com/photo-1571771894821-ce9b6c11b08e?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
            certification: [],
            delivery: "支持物流配送，1-3天送达",
            badge: "新品上架",
          },
          {
            id: 4,
            name: "秋葵",
            category: "okra",
            price: 11.5,
            unit: "公斤",
            stock: 1200,
            unitText: "公斤",
            supplier: {
              name: "扬州绿源合作社",
              type: "合作社",
              region: "扬州",
              contact: "13612345678",
              rating: 4.9,
              joinDate: "2021-11-05",
            },
            origin: "扬州高邮",
            quality: "特级",
            description: "新鲜秋葵，长度8-12cm，营养丰富，口感独特",
            image:
              "https://images.unsplash.com/photo-1573246123716-6b1782bfc499?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
            certification: ["有机认证", "无公害认证"],
            delivery: "支持物流配送，1-2天送达",
            badge: "有机产品",
          },
          {
            id: 5,
            name: "香菇",
            category: "mushroom",
            price: 9.8,
            unit: "公斤",
            stock: 3200,
            unitText: "公斤",
            supplier: {
              name: "淮安食用菌基地",
              type: "农业基地",
              region: "淮安",
              contact: "13512345678",
              rating: 4.7,
              joinDate: "2022-03-18",
            },
            origin: "淮安盱眙",
            quality: "一级",
            description: "新鲜香菇，菌盖直径4-6cm，肉质厚实，风味浓郁",
            image:
              "https://images.unsplash.com/photo-1513104890138-7c749659a591?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
            certification: ["无公害认证"],
            delivery: "支持物流配送，2-3天送达",
          },
          {
            id: 6,
            name: "优质苹果",
            category: "apple",
            price: 8.2,
            unit: "公斤",
            stock: 1800,
            unitText: "公斤",
            supplier: {
              name: "徐州果园",
              type: "个体农户",
              region: "徐州",
              contact: "13412345678",
              rating: 4.4,
              joinDate: "2023-03-05",
            },
            origin: "徐州邳州",
            quality: "一级果",
            description: "优质苹果，甜度适中，适合制作苹果脆片",
            image:
              "https://images.unsplash.com/photo-1568702846914-96b305d2aaeb?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
            certification: [],
            delivery: "支持物流配送，3-5天送达",
          },
          {
            id: 7,
            name: "胡萝卜",
            category: "carrot",
            price: 3.9,
            unit: "公斤",
            stock: 4200,
            unitText: "公斤",
            supplier: {
              name: "盐城农产品合作社",
              type: "合作社",
              region: "盐城",
              contact: "13312345678",
              rating: 4.3,
              joinDate: "2022-09-12",
            },
            origin: "盐城滨海",
            quality: "一级",
            description: "新鲜胡萝卜，色泽鲜艳，适合深加工",
            image:
              "https://images.unsplash.com/photo-1598170845058-78131a90f4bf?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
            certification: ["绿色食品"],
            delivery: "支持物流配送，2-4天送达",
          },
          {
            id: 8,
            name: "精品秋葵",
            category: "okra",
            price: 12.5,
            unit: "公斤",
            stock: 800,
            unitText: "公斤",
            supplier: {
              name: "泰州绿野农场",
              type: "家庭农场",
              region: "扬州",
              contact: "13212345678",
              rating: 4.8,
              joinDate: "2022-06-20",
            },
            origin: "泰州兴化",
            quality: "特级",
            description: "精品秋葵，品质优良，适合高端食品加工",
            image:
              "https://images.unsplash.com/photo-1573246123716-6b1782bfc499?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
            certification: ["有机认证"],
            delivery: "支持物流配送，1-2天送达",
            badge: "有机产品",
          },
        ];

        // ==================== 购物车功能 ====================
        const cartIcon = document.getElementById("cartIcon");
        const cartSidebar = document.getElementById("cartSidebar");
        const closeCart = document.getElementById("closeCart");
        const cartItems = document.getElementById("cartItems");
        const cartCount = document.getElementById("cartCount");
        const cartTotalPrice = document.getElementById("cartTotalPrice");
        const clearCartBtn = document.getElementById("clearCartBtn");
        const checkoutBtn = document.getElementById("checkoutBtn");

        // 购物车数据
        let cart = JSON.parse(localStorage.getItem("cart")) || [];

        // 更新购物车显示
        function updateCartDisplay() {
          // 更新购物车数量
          const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
          cartCount.textContent = totalItems;

          // 更新购物车侧边栏内容
          cartItems.innerHTML = "";
          let totalPrice = 0;

          if (cart.length === 0) {
            cartItems.innerHTML = `
              <div style="text-align: center; padding: 40px 0;">
                <i class="fas fa-shopping-cart" style="font-size: 48px; color: var(--gray-light); margin-bottom: 20px;"></i>
                <p style="color: var(--gray);">采购清单空空如也</p>
                <p style="color: var(--gray); font-size: 14px; margin-top: 10px;">添加农产品到清单，提交采购意向</p>
              </div>
            `;
          } else {
            cart.forEach((item, index) => {
              const itemTotal = item.price * item.quantity;
              totalPrice += itemTotal;

              const cartItemElement = document.createElement("div");
              cartItemElement.className = "cart-item";
              cartItemElement.innerHTML = `
                <div class="cart-item-img">
                  <img src="${item.image}" alt="${item.name}" />
                </div>
                <div class="cart-item-info">
                  <div class="cart-item-name">${item.name}</div>
                  <div class="cart-item-supplier">${item.supplier}</div>
                  <div class="cart-item-price">¥${item.price.toFixed(2)}/${
                    item.unit
                  }</div>
                </div>
                <div class="cart-item-quantity">
                  <button class="quantity-btn decrease-item" data-index="${index}">
                    <i class="fas fa-minus"></i>
                  </button>
                  <span>${item.quantity}${item.unit}</span>
                  <button class="quantity-btn increase-item" data-index="${index}">
                    <i class="fas fa-plus"></i>
                  </button>
                </div>
                <button class="remove-item" data-index="${index}">
                  <i class="fas fa-trash"></i>
                </button>
              `;

              cartItems.appendChild(cartItemElement);
            });
          }

          // 更新总价
          cartTotalPrice.textContent = `¥${totalPrice.toFixed(2)}`;

          // 保存到本地存储
          localStorage.setItem("cart", JSON.stringify(cart));
        }

        // 打开购物车
        cartIcon.addEventListener("click", function () {
          cartSidebar.classList.add("open");
          updateCartDisplay();
        });

        // 关闭购物车
        closeCart.addEventListener("click", function () {
          cartSidebar.classList.remove("open");
        });

        // 清空购物车
        clearCartBtn.addEventListener("click", function () {
          if (cart.length > 0 && confirm("确定要清空采购清单吗？")) {
            cart = [];
            updateCartDisplay();
          }
        });

        // 结算按钮
        checkoutBtn.addEventListener("click", function () {
          if (cart.length === 0) {
            alert("采购清单是空的，请先添加农产品！");
            return;
          }

          // 显示订单确认弹窗
          showOrderConfirmation();
        });

        // 购物车项目操作事件委托
        cartItems.addEventListener("click", function (e) {
          const target = e.target;

          // 减少数量
          if (target.closest(".decrease-item")) {
            const index = parseInt(
              target.closest(".decrease-item").getAttribute("data-index"),
            );
            if (cart[index].quantity > 1) {
              cart[index].quantity--;
              updateCartDisplay();
            }
          }

          // 增加数量
          if (target.closest(".increase-item")) {
            const index = parseInt(
              target.closest(".increase-item").getAttribute("data-index"),
            );
            cart[index].quantity++;
            updateCartDisplay();
          }

          // 移除项目
          if (target.closest(".remove-item")) {
            const index = parseInt(
              target.closest(".remove-item").getAttribute("data-index"),
            );
            cart.splice(index, 1);
            updateCartDisplay();
          }
        });

        // ==================== 农产品列表渲染 ====================
        const productsGrid = document.getElementById("productsGrid");
        const searchInput = document.getElementById("searchInput");
        const categoryFilter = document.getElementById("categoryFilter");
        const regionFilter = document.getElementById("regionFilter");
        const sortFilter = document.getElementById("sortFilter");
        const resetFiltersBtn = document.getElementById("resetFilters");

        // 统计数据元素
        const totalProductsEl = document.getElementById("totalProducts");
        const totalSuppliersEl = document.getElementById("totalSuppliers");
        const totalRegionsEl = document.getElementById("totalRegions");
        const totalStockEl = document.getElementById("totalStock");

        // 渲染农产品列表
        function renderProducts(products) {
          productsGrid.innerHTML = "";

          if (products.length === 0) {
            productsGrid.innerHTML = `
              <div style="grid-column: 1 / -1; text-align: center; padding: 60px 20px;">
                <i class="fas fa-search" style="font-size: 64px; color: var(--gray-light); margin-bottom: 20px;"></i>
                <h3 style="color: var(--dark); margin-bottom: 15px;">未找到匹配的农产品</h3>
                <p style="color: var(--gray); max-width: 500px; margin: 0 auto;">请尝试其他搜索关键词或筛选条件</p>
              </div>
            `;
            return;
          }

          products.forEach((product) => {
            const productCard = document.createElement("div");
            productCard.className = "product-card";

            // 处理认证标签
            let certificationHTML = "";
            if (product.certification && product.certification.length > 0) {
              certificationHTML = product.certification
                .map((cert) => `<span class="cert-badge">${cert}</span>`)
                .join("");
            }

            productCard.innerHTML = `
              ${product.badge ? `<div class="product-badge">${product.badge}</div>` : ""}
              <img src="${product.image}" alt="${product.name}" class="product-img" />
              <div class="product-content">
                <div class="product-header">
                  <h3 class="product-title">${product.name}</h3>
                  <div class="product-price">¥${product.price.toFixed(2)}<span>/${product.unitText}</span></div>
                </div>
                <div class="product-supplier">
                  <div class="supplier-avatar">${product.supplier.name.charAt(0)}</div>
                  <div class="supplier-info">
                    <h4>${product.supplier.name}</h4>
                    <p>${product.supplier.type} · ${product.supplier.region}</p>
                  </div>
                </div>
                <div class="product-details">
                  <div class="detail-item">
                    <span class="detail-label">产地:</span>
                    <span class="detail-value">${product.origin}</span>
                  </div>
                  <div class="detail-item">
                    <span class="detail-label">品质:</span>
                    <span class="detail-value">${product.quality}</span>
                  </div>
                  <div class="detail-item">
                    <span class="detail-label">库存:</span>
                    <span class="detail-value">${product.stock.toLocaleString()}${product.unitText}</span>
                  </div>
                  <div class="detail-item">
                    <span class="detail-label">农户评分:</span>
                    <span class="detail-value">${product.supplier.rating} <i class="fas fa-star" style="color: #ffc107;"></i></span>
                  </div>
                </div>
                ${certificationHTML ? `<div style="margin-bottom: 15px;">${certificationHTML}</div>` : ""}
                <div class="product-actions">
                  <button class="btn btn-outline btn-full contact-supplier" data-id="${product.id}">
                    <i class="fas fa-phone-alt"></i> 联系农户
                  </button>
                  <button class="btn btn-primary add-to-cart" data-id="${product.id}">
                    <i class="fas fa-cart-plus"></i> 加入清单
                  </button>
                </div>
              </div>
            `;

            productsGrid.appendChild(productCard);
          });

          // 更新统计数据
          updateStatistics(products);
        }

        // 更新统计数据
        function updateStatistics(products) {
          // 总产品数
          totalProductsEl.textContent = products.length;

          // 总供应商数（去重）
          const suppliers = [...new Set(products.map((p) => p.supplier.name))];
          totalSuppliersEl.textContent = suppliers.length;

          // 总地区数（去重）
          const regions = [...new Set(products.map((p) => p.supplier.region))];
          totalRegionsEl.textContent = regions.length;

          // 总库存（转换为吨）
          const totalStock = products.reduce(
            (sum, p) => sum + p.stock / 1000,
            0,
          );
          totalStockEl.textContent = totalStock.toFixed(1);
        }

        // 筛选和排序农产品
        function filterAndSortProducts() {
          let filteredProducts = [...agriculturalProducts];

          // 搜索筛选
          const searchTerm = searchInput.value.toLowerCase();
          if (searchTerm) {
            filteredProducts = filteredProducts.filter(
              (product) =>
                product.name.toLowerCase().includes(searchTerm) ||
                product.supplier.name.toLowerCase().includes(searchTerm) ||
                product.origin.toLowerCase().includes(searchTerm) ||
                product.description.toLowerCase().includes(searchTerm),
            );
          }

          // 品类筛选
          const selectedCategory = categoryFilter.value;
          if (selectedCategory) {
            filteredProducts = filteredProducts.filter(
              (product) => product.category === selectedCategory,
            );
          }

          // 地区筛选
          const selectedRegion = regionFilter.value;
          if (selectedRegion) {
            filteredProducts = filteredProducts.filter(
              (product) => product.supplier.region === selectedRegion,
            );
          }

          // 排序
          const sortOption = sortFilter.value;
          switch (sortOption) {
            case "price-asc":
              filteredProducts.sort((a, b) => a.price - b.price);
              break;
            case "price-desc":
              filteredProducts.sort((a, b) => b.price - a.price);
              break;
            case "stock-desc":
              filteredProducts.sort((a, b) => b.stock - a.stock);
              break;
            case "date-desc":
              // 这里使用加入日期模拟上架日期
              filteredProducts.sort(
                (a, b) =>
                  new Date(b.supplier.joinDate) - new Date(a.supplier.joinDate),
              );
              break;
          }

          // 渲染筛选后的产品
          renderProducts(filteredProducts);
        }

        // 事件监听
        searchInput.addEventListener("input", filterAndSortProducts);
        categoryFilter.addEventListener("change", filterAndSortProducts);
        regionFilter.addEventListener("change", filterAndSortProducts);
        sortFilter.addEventListener("change", filterAndSortProducts);

        // 重置筛选
        resetFiltersBtn.addEventListener("click", function () {
          searchInput.value = "";
          categoryFilter.value = "";
          regionFilter.value = "";
          sortFilter.value = "price-asc";
          filterAndSortProducts();
        });

        // 农产品卡片事件委托
        productsGrid.addEventListener("click", function (e) {
          const target = e.target;
          const addToCartBtn = target.closest(".add-to-cart");
          const contactSupplierBtn = target.closest(".contact-supplier");

          // 加入购物车
          if (addToCartBtn) {
            const productId = parseInt(addToCartBtn.getAttribute("data-id"));
            const product = agriculturalProducts.find(
              (p) => p.id === productId,
            );

            if (product) {
              // 检查是否已在购物车中
              const existingItemIndex = cart.findIndex(
                (item) => item.id === product.id,
              );

              if (existingItemIndex > -1) {
                // 更新现有项目数量
                cart[existingItemIndex].quantity += 100; // 默认增加100单位
              } else {
                // 添加新项目
                cart.push({
                  id: product.id,
                  name: product.name,
                  price: product.price,
                  quantity: 100, // 默认购买100单位
                  unit: product.unitText,
                  image: product.image,
                  supplier: `${product.supplier.name} (${product.supplier.region})`,
                });
              }

              updateCartDisplay();
              showNotification(`${product.name} 已添加到采购清单！`);
            }
          }

          // 联系农户
          if (contactSupplierBtn) {
            const productId = parseInt(
              contactSupplierBtn.getAttribute("data-id"),
            );
            const product = agriculturalProducts.find(
              (p) => p.id === productId,
            );

            if (product) {
              alert(
                `农户联系方式：${product.supplier.contact}\n\n您可以直接联系农户 ${product.supplier.name} 咨询更多详情。\n\n平台建议：在达成交易前，请通过平台进行初步沟通，确保交易安全。`,
              );
            }
          }
        });

        // 显示通知
        function showNotification(message) {
          // 创建通知元素
          const notification = document.createElement("div");
          notification.style.cssText = `
            position: fixed;
            top: 100px;
            right: 20px;
            background: var(--primary);
            color: white;
            padding: 15px 25px;
            border-radius: var(--radius);
            box-shadow: var(--shadow-lg);
            z-index: 10000;
            display: flex;
            align-items: center;
            gap: 10px;
            animation: slideIn 0.3s ease, fadeOut 0.3s ease 2.7s forwards;
          `;

          notification.innerHTML = `
            <i class="fas fa-check-circle"></i>
            <span>${message}</span>
          `;

          document.body.appendChild(notification);

          // 3秒后移除通知
          setTimeout(() => {
            if (notification.parentNode) {
              notification.parentNode.removeChild(notification);
            }
          }, 3000);
        }

        // 添加CSS动画
        const style = document.createElement("style");
        style.textContent = `
          @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
          }
          @keyframes fadeOut {
            from { opacity: 1; }
            to { opacity: 0; }
          }
          .cert-badge {
            display: inline-block;
            background: var(--accent-light);
            color: var(--accent);
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            margin-right: 8px;
            margin-bottom: 5px;
          }
        `;
        document.head.appendChild(style);

        // ==================== 订单确认功能 ====================
        const orderModal = document.getElementById("orderModal");
        const closeOrderModal = document.getElementById("closeOrderModal");
        const closeModalBtn = document.getElementById("closeModalBtn");
        const orderDetails = document.getElementById("orderDetails");

        // 显示订单确认弹窗
        function showOrderConfirmation() {
          // 生成订单详情
          let orderDetailsHTML = "";

          // 生成订单编号
          const orderId = "XL" + Date.now().toString().slice(-8);

          // 计算总价
          const totalPrice = cart.reduce(
            (sum, item) => sum + item.price * item.quantity,
            0,
          );
          const totalQuantity = cart.reduce(
            (sum, item) => sum + item.quantity,
            0,
          );

          // 订单概要
          orderDetailsHTML += `
            <div class="order-detail-item">
              <span class="order-detail-label">采购意向编号:</span>
              <span class="order-detail-value">${orderId}</span>
            </div>
            <div class="order-detail-item">
              <span class="order-detail-label">提交时间:</span>
              <span class="order-detail-value">${new Date().toLocaleString(
                "zh-CN",
              )}</span>
            </div>
            <div class="order-detail-item">
              <span class="order-detail-label">采购项目数:</span>
              <span class="order-detail-value">${cart.length} 项</span>
            </div>
            <div class="order-detail-item">
              <span class="order-detail-label">总数量:</span>
              <span class="order-detail-value">${totalQuantity.toLocaleString()} 单位</span>
            </div>
            <div class="order-detail-item">
              <span class="order-detail-label">总金额:</span>
              <span class="order-detail-value">¥${totalPrice.toFixed(2)}</span>
            </div>
          `;

          // 采购项目
          if (cart.length > 0) {
            orderDetailsHTML += `<div style="margin-top: 15px; font-weight: 600; color: var(--primary-dark);">采购项目清单:</div>`;

            cart.forEach((item) => {
              orderDetailsHTML += `
                <div class="order-detail-item">
                  <span class="order-detail-label">${item.name}</span>
                  <span class="order-detail-value">${item.quantity}${item.unit} × ¥${item.price.toFixed(2)} = ¥${(
                    item.price * item.quantity
                  ).toFixed(2)}</span>
                </div>
              `;
            });
          }

          orderDetails.innerHTML = orderDetailsHTML;

          // 显示订单确认弹窗
          orderModal.classList.add("open");

          // 关闭购物车
          cartSidebar.classList.remove("open");
        }

        // 关闭订单弹窗
        closeOrderModal.addEventListener("click", function () {
          orderModal.classList.remove("open");
        });

        closeModalBtn.addEventListener("click", function () {
          orderModal.classList.remove("open");
        });

        // 点击弹窗外部关闭
        orderModal.addEventListener("click", function (e) {
          if (e.target === orderModal) {
            orderModal.classList.remove("open");
          }
        });

        // ==================== 初始化 ====================
        // 初始渲染农产品列表
        renderProducts(agriculturalProducts);

        // 更新购物车显示
        updateCartDisplay();
      });
    </script>
  </body>
</html>
